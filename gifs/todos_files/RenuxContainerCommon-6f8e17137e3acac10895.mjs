(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["RenuxContainerCommon"],{"+6dQ":function(e,t,n){var s=n("28DW"),r=n("D2p8");t.a=e=>{r.c.resume(r.b),Object(s.a)("web.dismiss_account_switcher."+e)}},"/lhQ":function(e,t,n){t.a=e=>0===e.trim().length},"0Bqi":function(e,t,n){n.d(t,"a",(function(){return d}));var s=n("nKUr"),r=n.n(s),i=n("SCuf"),o=n("Ye/N"),a=n("MKeS"),c=n("YI5+"),l=n("n6mq");const u=Object(a.a)({resolved:{},chunkName:()=>"FullPageSignup",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e("FullPageSignup").then(n.bind(null,"CRJj")),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"CRJj"}});function d(e){return Object(s.jsx)(c.a,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>Object(s.jsx)(l.e,{display:"flex",justifyContent:"center",flex:"grow","data-test-id":"account-switcher-modal",children:Object(s.jsx)(u,{fallback:Object(s.jsx)(i.a,{}),container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:"login",signupSource:"login",customLoginTagline:e.customTaglineText||o.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account")})})})}},"0G5S":function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i}));const s=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(n){return console.error("Cannot access localStorage."),t}},r=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(t){console.error("Cannot access localStorage.")}},i=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(n){console.error("Cannot access localStorage.")}}},"4O/9":function(e,t,n){var s=n("Sxd8");e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=s(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},"573u":function(e,t,n){n.d(t,"a",(function(){return r}));const s=!("undefined"==typeof window||!window.performance||!window.performance.now);function r(e,t,n){this.category=e,this.variable=t,this.label=n,this.startTime,this.elapsedTime}function i(){return s?window.performance.now():Date.now()}function o(){this.timers={}}r.prototype.start=function(){return this.startTime=i(),this},r.prototype.end=function(){return this.elapsedTime=Math.round(i()-this.startTime),this.startTime=s?Math.round(this.startTime):null,this},r.prototype.getCompletedTime=function(){return this.elapsedTime},r.prototype.send=function(){if(this.elapsedTime>0&&this.elapsedTime<6e5){const{category:e,variable:t,label:s,elapsedTime:r}=this;Promise.resolve().then(n.bind(null,"rh3l")).then(({default:n})=>{n.logToServer(n.SERVER_LOG_TYPE.INTERACTION_TIMING,n.HTTP_METHOD.POST,{category:e,variable:t,label:s,time:r})})}return this},o.prototype.start=function(e,t,n,...s){const i=Array.prototype.slice.call([e,t,n,...s],0,2).join(":"),o=new r(e,t,n).start();this.timers[i]=o},o.prototype.end=function(e,t,n){const s=e+":"+t,r=this.timers[s];return r&&(r.end(),n&&r.send(),delete this.timers[s]),r};new o},AXUD:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));const s=412,r=429},CzMn:function(e,t,n){n.d(t,"a",(function(){return r}));var s=n("QLqj");function r(){return function(e){const t={};return e.forEach(e=>{const n=s.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)}),JSON.stringify(t)}(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}},HZII:function(e,t,n){var s=n("4O/9");e.exports=function(e){return s(2,e)}},IDoE:function(e,t,n){var s=n("xGpI");t.a=()=>Object.keys(Object(s.a)()).length},ItC7:function(e,t,n){n.r(t),n.d(t,"isRenuxBestPinsFallBack",(function(){return f})),n.d(t,"RenuxContainer",(function(){return x}));var s=n("nKUr"),r=n("q1tI"),i=n("/MKj"),o=n("QbJe"),a=n("NdXn"),c=n("MKmU"),l=n("ANjH"),u=n("gC5q"),d=n("Wer7"),h=n("0/lc"),p=n("U4JR"),g=n("zXAL"),b=n("5239");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=e=>e&&e.display_data&&e.display_data.refresh_homefeed_background;class x extends r.Component{constructor(...e){super(...e),m(this,"inRenuxExperience",()=>{const{experience:e}=this.props;return e&&500278===e.experience_id}),m(this,"handleDismiss",()=>{const{dismissCallback:e,experience:t,experienceClient:n,fetchUserHomefeedResource:s,viewer:r}=this.props;Object(p.b)(101,{component:17,element:1150,view:213}),this.inRenuxExperience()&&n.dismissExperience(11,500278),f(t)&&s(r),e&&e()}),m(this,"handleComplete",()=>{const{completeCallback:e,completeRenuxAction:t,experienceClient:n,fetchUserHomefeedResource:s,setRenuxUserState:r,viewer:i}=this.props;Object(p.b)(101,{component:17,element:96,view:213}),this.inRenuxExperience()&&n.completeExperience(11,500278);r(parseInt((new Date).getTime()/1e3,10)),t(),s(i),e&&e()})}componentDidMount(){const{experienceClient:e}=this.props;this.inRenuxExperience()&&e.viewExperience(11,500278)}render(){const{experience:e,isSimpleRenux:t}=this.props;if(t||this.inRenuxExperience()){const n=e&&e.display_data||{},r=t?b.t:n;return Object(s.jsx)(o.a,{...Object(u.a)(a.a,!0)(r),handleComplete:this.handleComplete,handleDismiss:this.handleDismiss,...this.props})}return null}}t.default=Object(l.compose)(Object(i.connect)((function({viewer:e}){return{viewer:e}}),e=>({completeRenuxAction:()=>e({type:"COMPLETE_RENUX"}),fetchUserHomefeedResource:t=>e(Object(d.a)("UserHomefeedResource",Object(c.a)({inNux:!0,staticFeed:!1,viewerIsPartner:t.isAuth&&t.isPartner}))),setRenuxUserState:t=>e(Object(h.a)(b.q,t))})),g.a)(x)},L2Gz:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c}));var s=n("QLqj");function r(e,t){return e.some(e=>e.id===t.id)}function i(e){const t=[];if(e){const n=72e5,s=Date.now()-n;for(const r of e)r.ts>=s&&("string"==typeof r.image_signature&&t.push(r.image_signature),"string"==typeof r.first_pin_image_signature&&t.push(r.first_pin_image_signature))}return t}function o(){return{plpImages:i(s.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")||[]),blpImages:i(s.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin")||[])}}function a(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function c(e){const t=e.log_data;if(!t)return"";return JSON.parse(t).source||""}},LgHV:function(e,t,n){var s=n("nKUr"),r=n("q1tI"),i=n("ihsa"),o=n("n6mq"),a=n("V08O");const c={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},l="DelightfulBubbles__",u=["DelightfulBubbles__fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n","DelightfulBubbles__growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n","DelightfulBubbles__swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n",...Object.keys(c).map(e=>{const t=((e,t)=>{const n=e.length,s=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[s]})(Object.keys(c),e);return`${l}colorChange_${e} {\n      0% {\n        background-color: ${c[e]};\n      }\n      50% {\n        background-color: ${c[t]};\n      }\n    }\n    `})],d=Object(a.a)(u);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=e=>{const{delay:t,diameter:n,height:r,initialColor:i,width:a,xOffset:u,yOffset:d}=e,h=((e,t,n,s,r,i,o,a)=>({bubblePositionStyles:{position:"absolute",marginLeft:i/2-r+"px",marginTop:n/2-r+"px",left:o+"px",top:a+"px"},bubbleSwirlStyles:{animation:`${l}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${l}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${l}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${l}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:t+"px",width:t+"px",borderRadius:"50%",backgroundColor:c[s],opacity:0,animation:`${l}colorChange_${s} 12s steps(1, start) ${e}s infinite forwards,\n      ${l}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${l}colorChange_${s} 12s steps(1, start) ${e}s infinite forwards,\n      ${l}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,r,i,Math.floor(n/2),a,u,d);return Object(s.jsx)(o.e,{dangerouslySetInlineStyle:{__style:h.bubblePositionStyles},children:Object(s.jsx)(o.e,{dangerouslySetInlineStyle:{__style:h.bubbleSwirlStyles},children:Object(s.jsx)(o.e,{dangerouslySetInlineStyle:{__style:h.bubbleGrowShrinkStyles},children:Object(s.jsx)(o.e,{dangerouslySetInlineStyle:{__style:h.bubbleShapeStyles}})})})})};class g extends r.Component{constructor(...e){super(...e),h(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){const{width:e,height:t}=this.props;return void 0!==e&&void 0!==t?{width:e,height:t}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{height:void 0,width:void 0}}createBubbles(e,t){const{bubbleSize:n,delayFactor:r,delayOffset:i,numBubbles:o,xRadiusAdjustment:l,yRadiusAdjustment:u}=this.props,d=e+2*u,h=t+2*l,g=[],b=Object.keys(c);for(let c=0;c<o;c+=1){const o=n+Object(a.c)(-4,4),l=b[c%b.length],{x:u,y:m}=Object(a.b)(d,h);g.push(Object(s.jsx)(p,{delay:c*r+i,diameter:o,initialColor:l,xOffset:u,yOffset:m,height:e,width:t},c))}return g}render(){const{height:e,width:t}=this.getSize();return Object(s.jsxs)(o.e,{height:e,width:t,position:"relative",children:[Object(s.jsx)(i.a,{unsafeCSS:d}),Object(s.jsxs)(o.e,{ref:e=>this.containerElement=e,children:[this.state.isInitialized&&this.createBubbles(e||0,t||0),Object(s.jsx)(o.e,{position:"relative",children:this.props.children})]})]})}}h(g,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});t.a=g},MKeS:function(e,t,n){n.d(t,"b",(function(){return C}));var s=n("q1tI"),r=n.n(s);function i(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=n("TOwV"),l=n("2mql"),u=n.n(l);function d(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}function h(e){console.warn("loadable: "+e)}var p=r.a.createContext();function g(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var b={initialChunks:{}},m="PENDING",f="REJECTED";var x=function(e){return e};function j(e){var t=e.defaultResolveComponent,n=void 0===t?x:t,s=e.render,l=e.onLoad;function h(e,t){void 0===t&&(t={});var h=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),g={};function x(e){return t.cacheKey?t.cacheKey(e):h.resolve?h.resolve(e):"static"}function j(e,s,r){var i=t.resolveComponent?t.resolveComponent(e,s):n(e);if(t.resolveComponent&&!Object(c.isValidElementType)(i))throw new Error("resolveComponent returned something that is not a React component!");return u()(r,i,{preload:!0}),i}var w,_=function(e){var n,r;function c(n){var s;return(s=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:x(n)},d(!n.__chunkExtractor||h.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?(!1===t.ssr||(h.requireAsync(n).catch((function(){return null})),s.loadSync(),n.__chunkExtractor.addChunk(h.chunkName(n))),a(s)):(!1!==t.ssr&&(h.isReady&&h.isReady(n)||h.chunkName&&b.initialChunks[h.chunkName(n)])&&s.loadSync(),s)}r=e,(n=c).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,c.getDerivedStateFromProps=function(e,t){var n=x(e);return o({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var u=c.prototype;return u.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===f&&this.setCache(),this.state.loading&&this.loadAsync()},u.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},u.componentWillUnmount=function(){this.mounted=!1},u.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},u.getCacheKey=function(){return x(this.props)},u.getCache=function(){return g[this.getCacheKey()]},u.setCache=function(e){void 0===e&&(e=void 0),g[this.getCacheKey()]=e},u.triggerOnLoad=function(){var e=this;l&&setTimeout((function(){l(e.state.result,e.props)}))},u.loadSync=function(){if(this.state.loading)try{var e=j(h.requireSync(this.props),this.props,y);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:h.resolve(this.props),chunkName:h.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},u.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=j(t,e.props,{Loadable:y});e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},u.resolveAsync=function(){var e=this,t=this.props,n=(t.__chunkExtractor,t.forwardedRef,i(t,["__chunkExtractor","forwardedRef"])),s=this.getCache();return s||((s=h.requireAsync(n)).status=m,this.setCache(s),s.then((function(){s.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:h.resolve(e.props),chunkName:h.chunkName(e.props),error:t?t.message:t}),s.status=f}))),s},u.render=function(){var e=this.props,n=e.forwardedRef,r=e.fallback,a=(e.__chunkExtractor,i(e,["forwardedRef","fallback","__chunkExtractor"])),c=this.state,l=c.error,u=c.loading,d=c.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===m)throw this.loadAsync();if(l)throw l;var h=r||t.fallback||null;return u?h:s({fallback:h,result:d,options:t,props:o({},a,{ref:n})})},c}(r.a.Component),O=(w=_,function(e){return r.a.createElement(p.Consumer,null,(function(t){return r.a.createElement(w,Object.assign({__chunkExtractor:t},e))}))}),y=r.a.forwardRef((function(e,t){return r.a.createElement(O,Object.assign({forwardedRef:t},e))}));return y.preload=function(e){h.requireAsync(e)},y.load=function(e){return h.requireAsync(e)},y}return{loadable:h,lazy:function(e,t){return h(e,o({},t,{suspense:!0}))}}}var w=j({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return r.a.createElement(t,n)}}),_=w.loadable,O=w.lazy,y=j({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),S=y.loadable,v=y.lazy,k="undefined"!=typeof window;function C(e,t){void 0===e&&(e=function(){});var n=(void 0===t?{}:t).namespace,s=void 0===n?"":n;if(!k)return h("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var r=null;if(k){var i=g(s),o=document.getElementById(i);if(o){r=JSON.parse(o.textContent);var a=document.getElementById(i+"_ext");if(!a)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(a.textContent).namedChunks.forEach((function(e){b.initialChunks[e]=!0}))}}if(!r)return h("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var c=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,n=t.push.bind(t);function s(){r.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(c||(c=!0,e()))}t.push=function(){n.apply(void 0,arguments),s()},s()})).then(e)}var I=_;I.lib=S,O.lib=v;t.a=I},MKmU:function(e,t,n){t.a=({inNux:e,inNewsHub:t,staticFeed:n,viewerIsPartner:s})=>({field_set_key:s?"hf_grid_partner":"hf_grid",in_nux:e,in_news_hub:t,prependPartner:s,static_feed:n})},NwVv:function(e,t,n){var s=n("ipvL"),r=n("bBqG");t.a=(e,t,n)=>{const i=s.a.getAccountsJSON();i[e.id]=(e=>{const t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||Object(r.a)("utils.incomplete_user_values"),e.partner&&e.partner.is_create?{...t,partner:{is_create:e.partner.is_create}}:t})(e),s.a.setAccounts(JSON.stringify(i)),t&&n&&Object(r.a)("new_account_add_success",{method:t,user_added:e.id},n)}},OCob:function(e,t,n){var s=n("+NLT");t.a=()=>({referrer:s.a.instance.referrer,facebookToken:s.a.instance.facebook_token,unauthId:s.a.instance.unauth_id,origin:s.a.instance.origin,appType:s.a.instance.app_type})},QbJe:function(e,t,n){n.d(t,"a",(function(){return Be}));var s=n("nKUr"),r=n("q1tI"),i=n("/MKj"),o=n("L2Gz"),a=n("Ye/N"),c=n("EgnG"),l=n("n6mq");const u=2640,d=500,h=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"],p=[10,-10,0];var g=Object(r.memo)((function(){const e=Object(r.createRef)();return Object(r.useEffect)(()=>{Object(c.a)({targets:e.current,translateY:["20%","-20%"],opacity:{value:0,delay:2680,duration:d},duration:4e3,easing:"cubicBezier(.35, 0, .7, .7)",fillMode:"forwards"})},[]),Object(s.jsx)(l.e,{width:"100%",ref:e,dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",columnGap:"8px"}},children:function(){const e=[];let t,n=0;for(let r=0;r<3;r+=1){e.push([]),t=[];for(let e=0;e<h.length;e+=1){const i=h[n];t.push(Object(s.jsx)(l.e,{color:i,height:168,marginTop:2,rounding:4,width:112},e)),n+=3,n>=h.length&&(n=r)}e[r].push(Object(s.jsx)(l.e,{marginTop:p[r],children:t},r))}return e}()})}));var b=Object(r.memo)((function({selectedInterest:e}){const t=Object(r.createRef)(),n=Object(r.createRef)(),i=Object(r.createRef)(),o=(e,t)=>Object(c.a)({targets:n.current,opacity:[0,1],delay:3640,duration:d,fillMode:"forwards"});Object(r.useEffect)(()=>{Object(c.a)({targets:t.current,scale:[.5,1],translateY:[448,0],opacity:[{value:0,duration:0},{value:1,duration:0}],delay:u,duration:800,easing:"linear",fillMode:"forwards"}),o(n.current),o(i.current)},[]);const h={label:a.a._("Food and Drink","Title for topic","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},{label:p,name:g,images:b}=e||h,{"400x":{url:m,height:f,width:x}}=b,j=(p||g||"").trim().toLowerCase().replace(/\s/g,"").concat(".com");return Object(s.jsxs)(l.e,{ref:t,height:354,width:236,position:"absolute",marginTop:"auto",marginBottom:"auto",top:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{right:"96px"}},children:[Object(s.jsx)(l.C,{height:354,rounding:4,width:236,children:Object(s.jsx)(l.x,{alt:a.a._("Pin image","Pin image for nux loading step","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:f,naturalWidth:x,src:m})}),Object(s.jsx)(l.e,{ref:n,margin:3,position:"absolute",right:!0,top:!0,children:Object(s.jsx)(l.f,{accessibilityLabel:a.a._("Save button"),color:"red",size:"lg",text:a.a._("Save","save button for nux loading step","save button for nux loading step")})}),Object(s.jsxs)(l.e,{ref:i,color:"lightGray",margin:3,paddingX:3,paddingY:1,rounding:"pill",position:"absolute",bottom:!0,left:!0,maxWidth:"90%",display:"flex",alignItems:"center",justifyContent:"between",children:[Object(s.jsx)(l.e,{alignItems:"center",children:Object(s.jsx)(l.v,{accessibilityLabel:a.a._("link","Pin website url link for nux loading step","Pin website url link for nux loading step"),color:"darkGray",icon:"arrow-up-right",size:12})}),Object(s.jsx)(l.e,{flex:"grow",height:18,marginStart:2,overflow:"hidden",children:Object(s.jsx)(l.Y,{size:"sm",truncate:!0,weight:"bold",children:j})})]})]})})),m=n("nMRj"),f=n("eOdZ"),x=n("U4JR"),j=n("vVbV"),w=n("5239");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O extends r.PureComponent{constructor(...e){super(...e),_(this,"state",{progressPercent:0}),_(this,"gridCopyRef",Object(r.createRef)()),_(this,"pinCopyRef",Object(r.createRef)()),_(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t}=this.props;if(Object(x.b)(8900,{view:t?213:24,viewParameter:261}),e(),!t){f.a.create("UserStateResource",{state:w.l,value:w.a}).callCreate()}})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t}=this.props;if(!t){f.a.create("UserStateResource",{state:w.l,value:w.r}).callCreate()}e("loader"),Object(x.b)(13,{view:t?213:24,viewParameter:261}),this.intervalId=setInterval(()=>this.setState(e=>({progressPercent:Math.min(e.progressPercent+100/17,100)})),300),Object(c.a)({targets:this.gridCopyRef.current,opacity:[1,0],delay:u,duration:d,easing:"linear",fillMode:"forwards"}),Object(c.a)({targets:this.pinCopyRef.current,opacity:[0,1],delay:3140,duration:d,easing:"linear",fillMode:"forwards"})}componentDidUpdate(e,t){const{progressPercent:n}=t,{progressPercent:s}=this.state;n!==s&&s>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,1e3))}componentWillUnmount(){clearInterval(this.intervalId)}render(){const{isRenux:e,selectedInterests:t,showProgressBar:n}=this.props,{progressPercent:r}=this.state,i=e?a.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step","Details for ReNUX loading step"):a.a._("We're building your home feed with lots of Pins...","Details for nux loading step","Details for nux loading step"),o=a.a._("They are links saved from around the web","Pin education on NUX loading step","Pin education on NUX loading step"),c=Object(s.jsx)(m.a,{height:10,innerBorderRadius:"0 32px 32px 0",outerBorderRadius:"32px 32px 0 0",progress:r});return Object(s.jsxs)(l.e,{display:"flex",direction:"column",height:"100%",overflow:"hidden","data-test-id":"nux-complete-loader",children:[Object(s.jsxs)(l.e,{alignItems:"center",direction:"row",display:"flex",height:"100%",justifyContent:"between",overflow:"hidden",paddingX:12,width:"100%",children:[Object(s.jsxs)(l.e,{marginStart:12,position:"relative",width:230,children:[Object(s.jsxs)(l.e,{ref:this.gridCopyRef,children:[Object(s.jsx)(l.u,{size:"md",children:a.a._("All set!","Title for nux loading step","Title for nux loading step")}),Object(s.jsx)(l.e,{marginTop:4,children:Object(s.jsx)(l.Y,{children:i})})]}),Object(s.jsxs)(l.e,{ref:this.pinCopyRef,position:"absolute",top:!0,children:[Object(s.jsx)(l.u,{size:"md",children:a.a._("Pins are ideas","Pin education on NUX loading step","Pin education on NUX loading step")}),Object(s.jsx)(l.e,{marginTop:4,children:Object(s.jsx)(l.Y,{children:o})})]})]}),Object(s.jsx)(l.e,{marginEnd:2,children:Object(s.jsx)(g,{})}),Object(s.jsx)(b,{selectedInterest:t[0]})]}),!n&&Object(s.jsx)(l.e,{height:10,position:"absolute",top:!0,width:"100%",children:Object(s.jsx)(l.e,{height:65,overflow:"hidden",paddingX:2,rounding:8,children:c})})]})}}var y=Object(i.connect)(({viewer:e})=>({viewer:e}),e=>({dispatchSetNuxStepProgress:t=>e(Object(j.a)(t))}))(O),S=n("IZzd"),v=n("028R"),k=n("0/lc");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I extends r.Component{constructor(...e){super(...e),C(this,"onInstallButtonClicked",()=>{const{isRenux:e}=this.props;S.a.handleExtensionInstall(this.incrementStepAndCompleteLoading),Object(x.b)(101,{component:17,element:280,view:e?213:24,viewParameter:260})}),C(this,"onSkipButtonClick",()=>{const{isRenux:e}=this.props;Object(x.b)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),this.incrementStepAndCompleteLoading()}),C(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(w.a),e()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(w.r),e("extension"),Object(x.b)(13,{view:t?213:24,viewParameter:260})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t}}=this.props;return Object(s.jsx)(v.a,{header:e,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:t})}}var T=Object(i.connect)(null,(e,t)=>({setNuxUpsellProgress:t=>e(Object(k.a)(w.i,t)),dispatchSetNuxStepProgress:t=>e(Object(j.a)(t))}))(I),N=n("JW66"),E=n("7pfs");function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const R=()=>{},L=({isChecked:e,label:t,selectGender:n,value:r})=>Object(s.jsx)(E.a,{children:({hovered:i,onMouseEnter:o,onMouseLeave:a})=>Object(s.jsx)(l.e,{color:i?"lightGray":"transparent","data-test-id":`nux-gender-${t}-label`,onKeyUp:t=>{e||t.keyCode!==N.a.KeyCode.SPACE&&t.keyCode!==N.a.KeyCode.ENTER||n()},onMouseEnter:o,onMouseLeave:a,onMouseUp:()=>{e||n()},rounding:i?2:0,children:Object(s.jsx)(l.y,{htmlFor:t,children:Object(s.jsxs)(l.e,{alignItems:"center",display:"flex",flex:"none",height:60,paddingX:8,children:[Object(s.jsx)(l.K,{checked:e,id:t,name:"genderOptions",onChange:R,size:"md",value:t}),Object(s.jsx)(l.e,{display:"flex",flex:"grow",marginStart:6,children:r})]})})})}),A=({children:e})=>Object(s.jsx)(l.u,{size:"sm",children:e});class U extends r.PureComponent{constructor(...e){super(...e),P(this,"state",{customGender:this.props.customGender,gender:this.props.gender,showCustomGenderTextfield:this.props.gender===w.u&&this.props.customGender.length>0,showNextButton:[w.g,w.f].includes(this.props.gender)||this.props.customGender.length>0,showCustomGenderDoneButton:this.props.gender===w.u&&this.props.customGender.length>0}),P(this,"setCustomGender",e=>{e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):this.state.showNextButton&&e.target instanceof HTMLInputElement?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):this.setState({customGender:"",showCustomGenderDoneButton:!1})}),P(this,"updateGenderCompleteStep",()=>{const{incrementNuxStep:e,isRenux:t,updateGenderInfo:n}=this.props,{customGender:s,gender:r}=this.state;n(r===w.u?{gender:w.u,custom_gender:s.slice(0,30)}:{gender:r}).then(()=>{this.setUserStateCompletedGenderStep(),Object(x.b)(8900,{view:t?213:24,viewParameter:3120}),e()})}),P(this,"logButtonClick",e=>{let t;switch(e){case"genderButton":t=241;break;case"nextButton":t=96;break;case"submitButton":t=11906}t&&Object(x.b)(101,{component:17,element:t,view:this.props.isRenux?213:24,viewParameter:3120})})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxGenderProgress:n}=this.props;e("gender"),t||n(w.r),Object(x.b)(13,{view:t?213:24,viewParameter:3120})}onSelectGender(e){const{showCustomGenderTextfield:t,showNextButton:n}=this.state;n?this.setState({gender:e,showCustomGenderTextfield:e===w.u},()=>this.logButtonClick("genderButton")):e===w.u||t?this.setState({gender:w.u,customGender:"",showCustomGenderTextfield:!t,showCustomGenderDoneButton:!1},()=>this.logButtonClick("genderButton")):this.setState({gender:e},()=>{this.logButtonClick("genderButton"),this.updateGenderCompleteStep()})}setUserStateCompletedGenderStep(){const{isRenux:e,setNuxGenderProgress:t}=this.props;e||t(w.a)}render(){const{isRenux:e,personalizationCopy:{headerText:t,subHeaderText:n}}=this.props,{customGender:i,showCustomGenderDoneButton:o,showCustomGenderTextfield:c,showNextButton:u}=this.state,d=a.a._("Female","nux.gender.femaleButton","Option for select female gender"),h=a.a._("Male","nux.gender.maleButton","Option for select male gender"),p=a.a._("Specify another","nux.gender.specifyButton","Option for gender besides male and female"),g=a.a._("Enter preferred gender","nux.gender.customGenderPlaceholder","placeholder text for custom gender text field"),b=a.a._("Submit","nux.gender.submitCustomGender","button text for submitting a custom gender type"),m=c?Object(s.jsxs)(r.Fragment,{children:[Object(s.jsx)(l.e,{"data-test-id":"nux-gender-unspecified-input",display:"flex",flex:"grow",marginEnd:!u&&o?3:0,children:Object(s.jsx)(l.e,{alignItems:"center",width:"100%",children:Object(s.jsx)(l.ab,{id:"customGender",onChange:({event:e})=>this.setCustomGender(e),placeholder:i||g,size:"lg"})})}),!u&&o&&Object(s.jsx)(l.e,{"data-test-id":"nux-gender-unspecified-done-btn",children:Object(s.jsx)(l.f,{color:"red",inline:!0,onClick:()=>{this.logButtonClick("submitButton"),this.updateGenderCompleteStep()},size:"lg",text:b})})]}):Object(s.jsx)(A,{children:p});return Object(s.jsxs)(l.e,{direction:"column",display:"flex",height:"100%",justifyContent:"start",paddingY:8,width:"100%",children:[Object(s.jsx)(l.e,{direction:"column",display:"flex",marginTop:11,paddingX:8,paddingY:8,children:e?Object(s.jsxs)(l.e,{marginTop:8,paddingY:4,children:[Object(s.jsx)(l.u,{align:"center",size:"md",children:t}),Object(s.jsx)(l.e,{marginTop:3,children:Object(s.jsx)(l.Y,{align:"center",children:n})})]}):Object(s.jsx)(l.u,{align:"center",size:"lg",children:t})}),Object(s.jsxs)(l.e,{paddingY:8,children:[Object(s.jsx)(L,{isChecked:!c&&this.state.gender.toLowerCase()===w.f,label:w.f,selectGender:()=>this.onSelectGender(w.f),value:Object(s.jsx)(A,{children:d})}),Object(s.jsx)(L,{isChecked:!c&&this.state.gender.toLowerCase()===w.g,label:w.g,selectGender:()=>this.onSelectGender(w.g),value:Object(s.jsx)(A,{children:h})}),Object(s.jsx)(L,{isChecked:c,label:w.u,selectGender:()=>this.onSelectGender(w.u),value:m})]}),u&&Object(s.jsx)(l.e,{"data-test-id":"nux_gender_next_btn",marginEnd:8,marginStart:8,marginTop:"auto",children:Object(s.jsx)(l.f,{accessibilityLabel:a.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:c&&0===this.state.customGender.length,onClick:()=>{this.logButtonClick("nextButton"),this.updateGenderCompleteStep()},size:"lg",text:a.a._("Next","next nux step button","next nux step button"),type:"button"})})]})}}var B=Object(i.connect)(({viewer:e})=>({gender:e.gender?e.gender:"",customGender:e.customGender?e.customGender:""}),(e,t)=>({dispatchSetNuxStepProgress:t=>e(Object(j.a)(t)),setNuxGenderProgress:t=>e(Object(k.a)(w.k,t)),updateGenderInfo:t=>e(Object(k.e)({updateUserData:t}))}))(U),D=n("TPPM"),G=n("w70y");var M=e=>{const{defaultOptions:t,id:n,items:r,name:i,onChange:o,value:a}=e,c=(r.data||t||[]).concat().sort((e,t)=>e.name.localeCompare(t.name)).map(({name:e,key:t})=>({label:e.toString(),value:t}));return Object(s.jsx)(l.P,{id:n,name:i,onChange:o,options:c,size:"lg",value:a})};function z(e){const t=Object(G.a)({name:"CountriesResource"});return Object(s.jsx)(M,{items:t,...e})}function F(e){const t=Object(G.a)({name:"LocalesResource"});return Object(s.jsx)(M,{items:t,...e})}var H=n("QLqj"),X=n("kmwA"),q=n("v/Q4"),Y=n("pLLR");function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class W extends r.PureComponent{constructor(...e){super(...e),V(this,"state",{locale:this.props.reduxLocale||(this.props.requestContext||{}).locale||w.c,country:this.props.reduxCountry||(this.props.requestContext||{}).country||w.b,swappingLanguage:!1}),V(this,"onNextButtonClick",()=>{const{incrementNuxStep:e,isRenux:t,updateUserInfo:n,setNuxLocaleProgress:s}=this.props,{country:r,locale:i}=this.state;n({updateUserData:{country:r,locale:i}}).then(()=>{t||s(w.a),Object(x.b)(101,{component:17,element:96,view:24,viewParameter:3139}),Object(x.b)(8900,{view:24,viewParameter:3139}),e()})}),V(this,"updateLocale",({value:e})=>this.setState({locale:e})),V(this,"updateCountry",({value:e})=>this.setState({country:e}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxLocaleProgress:n}=this.props;t||n(w.r),e("country");H.b.localStorage.getItem("signupUserLocale")||H.b.localStorage.getItem("signupUserCountry")||Object(x.b)(13,{view:24,viewParameter:3139})}componentDidUpdate(e,t){const{toggleLoadingIndicator:n,isBizNux:s,updateUserInfo:r}=this.props,{country:i,locale:o}=t,{country:a,locale:c}=this.state,l=i!==a,u=o!==c,d=X.a.settings.EU_COUNTRIES_2020_COOKIE_POLICY,h=!d.includes(i)&&d.includes(a);(l||u)&&r({updateUserData:{...h?{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1}:{},country:a,locale:c}}).then(()=>{l&&H.b.localStorage.setItem("signupUserCountry",a),u&&(H.b.localStorage.setItem("signupUserLocale",c),s?this.setState({swappingLanguage:!0}):n(!0),Object(D.a)("/"))})}render(){const{personalizationCopy:{headerText:e}}=this.props,{country:t,locale:n,swappingLanguage:r}=this.state;return Object(s.jsxs)(l.e,{direction:"column",display:"flex",height:"100%",padding:8,width:"100%",children:[Object(s.jsxs)(l.e,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginBottom:7,children:[Object(s.jsx)(l.e,{marginTop:10,paddingY:5,width:"100%",children:Object(s.jsx)(l.u,{align:"center",size:"md",children:e})}),Object(s.jsxs)(l.e,{marginTop:12,paddingY:5,width:"100%",children:[Object(s.jsx)(l.e,{"data-test-id":"nux-locale-select",children:Object(s.jsx)(F,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:n})}),Object(s.jsx)(l.e,{"data-test-id":"nux-country-select",marginTop:4,children:Object(s.jsx)(z,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:t})})]})]}),Object(s.jsx)(l.e,{bottom:!0,"data-test-id":"nux-locale-country-next-btn",children:Object(s.jsx)(l.f,{color:"red",disabled:r||"Country"===t,onClick:this.onNextButtonClick,size:"lg",text:a.a._("Next","go to next step","go to next step"),type:"submit"})})]})}}function $(e){const t=Object(i.useDispatch)(),n=Object(q.a)();return Object(s.jsx)(W,{...e,dispatchSetNuxStepProgress:e=>t(Object(j.a)(e)),reduxCountry:n.isAuth&&n.country?n.country:"",reduxLocale:n.isAuth&&n.locale?n.locale:"",requestContext:Object(Y.d)(),setNuxLocaleProgress:e=>t(Object(k.a)(w.j,e)),updateUserInfo:e=>t(Object(k.e)(e))})}var K=n("XocW"),J=n("CzMn"),Q=n("1inl"),Z=n("Jr++"),ee=n("rh3l"),te=n("N0Eu"),ne=n("HZII"),se=n.n(ne),re=n("gYog");function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const oe=se()(()=>{H.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)});class ae extends r.PureComponent{constructor(...e){super(...e),ie(this,"gridContainer",Object(r.createRef)()),ie(this,"scrollContainer",Object(r.createRef)()),ie(this,"handleScroll",()=>{const e=this.scrollContainer.current,t=this.gridContainer.current;if(e&&t){oe();const n=e.scrollTop+e.offsetHeight>=t.clientHeight;this.props.handleBottomScroll(n)}}),ie(this,"renderInterests",e=>{const{handleInterestClickFn:t,isRenux:n}=this.props;return Object(s.jsx)(l.e,{display:"flex",marginStart:5,marginTop:-1,justifyContent:"start",wrap:!0,children:e.map((r,i)=>Object(s.jsx)(re.a,{impressionType:"Interest",loggingId:r.id,slotIndex:i,viewType:n?213:24,viewParameter:172,children:({impressionTrackerRef:n})=>Object(s.jsx)(l.e,{padding:1,ref:n,children:Object(s.jsx)(te.a,{clickHandler:t(r,i),index:i+1,interest:r,isSelected:r.is_followed,size:"xl_144",totalInterests:e.length},r.id)})},r.id))})})}componentDidMount(){this.scrollContainer.current&&this.scrollContainer.current.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){this.scrollContainer.current&&this.scrollContainer.current.removeEventListener("scroll",this.handleScroll)}render(){const{disableScroll:e,interests:t}=this.props;return t.length>0&&H.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),Object(s.jsx)(l.e,{ref:this.scrollContainer,dangerouslySetInlineStyle:{__style:{paddingBottom:"40px"}},flex:"grow",height:"100%",overflow:e?"visible":"scrollY",paddingX:2,width:"100%",children:t.length>0?Object(s.jsx)(l.e,{ref:this.gridContainer,children:this.renderInterests(t)}):Object(s.jsx)(l.R,{accessibilityLabel:a.a._("Loading default interests"),show:!0})})}}function ce(e){const t=Object(q.a)();return Object(s.jsx)(ae,{...e,reduxCountry:t.isAuth&&t.country?t.country:"",reduxLocale:t.isAuth&&t.locale?t.locale:"",requestContext:Object(Y.d)()})}var le=n("573u");function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class de extends r.PureComponent{constructor(...e){super(...e),ue(this,"state",{defaultInterests:[],defaultInterestsSet:new Set,addedContextualTopics:new Set,numTopicsToShow:null}),ue(this,"handleInterestClickFn",(e,t)=>()=>{const{selectedInterests:n,onSelectedInterestsChange:s}=this.props,r=!Object(o.b)(n,e);s([e],r),this.logInterestClick(r,e.id,t),this.contextualUpdateInterests(new Set([e.id]))}),ue(this,"logInterestClick",(e,t,n)=>{const{isRenux:s}=this.props,r=e?1030:1151;Object(x.b)(101,{component:36,element:r,grid_index:n,objectId:t,view:s?213:24,viewParameter:172})}),ue(this,"componentName",w.m),ue(this,"recordRenderLogToServer",()=>{const e=this.renderTimers.pop();e.end(),ee.default.logToServer(ee.default.SERVER_LOG_TYPE.RENDER_TIME,ee.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:this.componentName})}),ue(this,"renderTimers",[])}getExtraImageSignal(){const{plpImages:e,blpImages:t}=Object(o.a)(),{mostRecentPinImages:n}=this.props,s=e.concat(t);return n.concat(s)}componentDidMount(){const{hideFollowedInterests:e,isRenux:t,selectedInterests:n}=this.props;f.a.create("NuxInterestsResource",{is_renux:t,logNetworkTimer:!0,loggerComponentName:w.m,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:e,urlParams:Object(Z.a)()}).callGet({showError:!1},{retries:1}).then(t=>{const s=t.resource_response&&t.resource_response.data;if(s){this.logSignupTiming();const t=e?s.filter(e=>!e.is_followed):s,r=this.mapInterestsForDisplay(n,t),i=this.state.defaultInterests;this.setState({defaultInterests:r},()=>{i!==r&&this.renderTimers.unshift((new le.a).start())});const o=new Set;r.forEach(e=>{!0===e.is_followed&&o.add(e.id)}),Object.keys(o).length>0&&this.contextualUpdateInterests(o)}}).catch(e=>{Q.a&&Q.a.showError(e.message||a.a._("Unable to load topics","Error message when failed to load topics.","Error message when failed to load topics."))})}componentDidUpdate(e,t){const{defaultInterests:n}=this.state;n!==t.defaultInterests&&this.renderTimers.length&&this.recordRenderLogToServer(),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}getInterestsWithUpdatedIsFollowed(){const{selectedInterests:e}=this.props,{defaultInterests:t}=this.state,n=t.map(t=>(t.is_followed=Object(o.b)(e,t),t)),s=[...e.filter(e=>"type_ahead_search"===Object(o.d)(e))];return n.concat(...s)}logSignupTiming(){const e=H.b.localStorage.getItem("signupTime");if(e){const t=Date.now()-e;t<w.s&&ee.default.logToServer(ee.default.SERVER_LOG_TYPE.SIGNUP_LOAD,ee.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),H.b.localStorage.removeItem("signupTime")}}mapInterestsForDisplay(e,t){const n=t.map(e=>({...e,is_followed:e.is_followed,label:e.name}));this.props.onSelectedInterestsChange(n.filter(e=>e.is_followed),!0);const s=new Set(e.map(e=>e.id)),r=n.filter(e=>!s.has(e.id));return e.concat(r)}preselectInterests(){const{numberToFollow:e,onSelectedInterestsChange:t}=this.props,{defaultInterests:n}=this.state,s=e||w.e;t(n.slice(0,s),!0)}contextualUpdateInterests(e){const{defaultInterests:t,defaultInterestsSet:n,addedContextualTopics:s}=this.state,r=[],i=[];let o=!1;t.forEach(t=>{if(r.push(t),n.add(t.id),e.has(t.id)&&!s.has(t.id)){const e=(t.contextual_interests||[]).filter(e=>!n.has(e.id));e.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?r.push(...e):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&i.push(...e),e.forEach(e=>{n.add(e.id)}),o=!0)}}),i.length>0&&r.push(...i),o&&this.setState({addedContextualTopics:new Set([...s,...e]),defaultInterests:r})}render(){const{handleBottomScroll:e,isRenux:t,selectedInterests:n}=this.props,{numTopicsToShow:r}=this.state,i=this.getInterestsWithUpdatedIsFollowed();return Object(s.jsx)(ce,{disableScroll:!!r&&r<=5,handleBottomScroll:e,handleInterestClickFn:this.handleInterestClickFn,interests:r?i.slice(0,r):i,isRenux:t,selectedInterests:n})}}var he=Object(i.connect)(({mostRecentPin:e})=>({mostRecentPinImages:e&&e.plp_image_signatures?e.plp_image_signatures:[]}),()=>({}))(de),pe=n("eBDd"),ge=n("DzJC"),be=n.n(ge),me=n("vvax");function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xe=Object(s.jsx)(l.e,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1))"}},height:20,left:!0,marginTop:-5,position:"absolute",right:!0,top:!0});class je extends r.Component{constructor(...e){super(...e),fe(this,"state",{isBottom:!1}),fe(this,"getButtonAttributes",()=>{const{hideFollowedInterests:e,isRenux:t,numberToFollow:n,selectedInterests:s}=this.props,{isBottom:r}=this.state,i=s.length,o=r&&i>=w.h?0:Math.max(0,n-i),c=a.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",o,"number of interests left to pick","number of interests left to pick"),l=t&&e?a.a._("Next","go to next step","go to next step"):Object(pe.a)(c,{numberLeftToFollow:""+o});return{text:o>0?l:a.a._("Done"),isDisabled:o>0}}),fe(this,"handleBottomScroll",e=>this.setState({isBottom:e})),fe(this,"handleBottomScrollThrottled",be()(this.handleBottomScroll,50)),fe(this,"handleNextClick",()=>{const{isRenux:e,selectedInterests:t,followedInterests:n,setNuxPickerProgress:s,dispatchUpdateFollows:r,dispatchSubmitOrientationContext:i}=this.props;let o;if(e){const e=n.reduce((e,t)=>(e[t.id]=t.is_followed,e),{});o=Promise.resolve(r(e))}else{const e=[],n=[];t.forEach(t=>{e.push(t.id),n.push(t.log_data?t.log_data:null)});const s={interests:e.join(),log_data:JSON.stringify(n),referrer:"nux",user_behavior_data:Object(J.a)()};o=Promise.resolve(i(s))}o.then(()=>{e||s(w.a),Object(x.b)(101,{component:17,element:96,view:this.viewType,viewParameter:172}),this.logAndIncrementNuxStep(this.viewType,172)})}),fe(this,"logAndIncrementNuxStep",(e,t)=>{Object(x.b)(8900,{view:e,viewParameter:t}),this.props.incrementNuxStep()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxPickerProgress:n}=this.props;t||n(w.r),this.viewType=t?213:24,e("topic"),Object(x.b)(13,{view:this.viewType,viewParameter:172})}render(){const{hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,onSelectedInterestsChange:r,personalizationCopy:{headerText:i,subHeaderText:o},preselect:c,selectedInterests:u,numberToFollow:d}=this.props,h=this.getButtonAttributes();return Object(s.jsxs)(l.e,{direction:"column",display:"flex",height:"100%",children:[Object(s.jsx)(l.e,{display:"visuallyHidden",role:"alert",children:Object(me.b)(a.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected","accessible label how many topics are selected"),{selectedTopicsCount:u.length})}),Object(s.jsxs)(l.e,{marginBottom:8,marginTop:t?8:4,paddingX:8,wrap:!0,children:[Object(s.jsx)(l.u,{align:"center",size:"md",children:i}),o&&Object(s.jsx)(l.e,{marginTop:2,children:Object(s.jsx)(l.Y,{align:"center",children:o})})]}),Object(s.jsx)(he,{handleBottomScroll:this.handleBottomScrollThrottled,hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,numberToFollow:d,onSelectedInterestsChange:r,preselect:c,selectedInterests:u}),Object(s.jsxs)(l.e,{position:"relative",children:[xe,Object(s.jsx)(l.e,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:8,paddingX:8,children:Object(s.jsx)(l.f,{color:"red",disabled:h.isDisabled,onClick:this.handleNextClick,size:"lg",text:h.text,type:"submit"})})]})]})}}var we=Object(i.connect)(null,(function(e){return{dispatchSetNuxStepProgress:t=>e(Object(j.a)(t)),dispatchUpdateFollows:t=>e(Object(k.d)(t,"renux")),dispatchSubmitOrientationContext:t=>e(Object(k.b)(t)),setNuxPickerProgress:t=>e(Object(k.a)(w.n,t))}}))(je),_e=n("ozRy"),Oe=n("FDmi"),ye=n("yaUg"),Se=n("LgHV"),ve=n("ESls"),ke=n("/lhQ"),Ce=n("EC51"),Ie=n("28DW"),Te=n("0S8y");function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ee extends r.PureComponent{constructor(...e){super(...e),Ne(this,"state",{name:this.props.authViewer.firstName||"",showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),Ne(this,"onNameChange",({value:e})=>{this.setState({name:e||"",showNoNameError:!e||Object(ke.a)(e),showNameLengthError:!!e&&e.length>30})}),Ne(this,"toggleNameInput",()=>{this.setState(({showNameLengthError:e,showNoNameError:t,showNameInput:n})=>({showNameInput:e||t||!n})),Object(x.b)(101,{element:136,view:24,viewParameter:259})}),Ne(this,"continueAndSave",()=>{const{dispatch:e,incrementNuxStep:t,authViewer:n}=this.props,{name:s}=this.state,r=Object(Te.a)(s);e(Object(k.e)({updateUserData:r})).then(()=>{e(Object(k.a)(w.o,w.a)),Object(x.b)(101,{element:96,view:24,viewParameter:259,did_edit_name:(n.firstName||"")!==s}),Object(x.b)(8900,{view:24,viewParameter:259}),t()})}),Ne(this,"getError",()=>{const{showNameLengthError:e,showNoNameError:t}=this.state;let n="";return t?n=a.a._("And your name is...?","Error flyout when user doesn't input name","Error flyout when user doesn't input name"):e&&(n=a.a._("Hmm, that's too long. Try a nickname instead?","nux.welcomeStep.nameLengthError","Name exceeds 30 character maximum error")),n}),Ne(this,"handleHideAccountSwitcher",()=>this.setState({showAccountSwitchModal:!1})),Ne(this,"handleNotYouClick",e=>{e.event.preventDefault(),Object(Ie.a)("web.nux.click_login"),this.setState({showAccountSwitchModal:!0})})}componentDidMount(){this.props.dispatch(Object(j.a)("welcome")),Object(x.b)(13,{view:24,viewParameter:259})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t},authViewer:n}=this.props,{name:i,showAccountSwitchModal:o,showNameInput:c}=this.state,u=t.indexOf(" ",Math.round(t.length/2)),d=Object(ye.a)(a.a._("{{ titleText }} {{ name }}!","nux.welcomeStep.greetingHeader","Greeting with inferred name."),{titleText:e,name:i}).replace(",",""),h=d.indexOf(i)-1,p=this.getError(),g=Object(s.jsxs)(l.e,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",overflow:"hidden",width:"100%",children:[Object(s.jsx)(l.y,{htmlFor:"name",children:Object(s.jsx)(l.e,{marginEnd:-1,marginStart:-1,marginTop:4,children:c?Object(s.jsx)(l.u,{align:"center",size:"md",children:e}):Object(s.jsxs)(r.Fragment,{children:[Object(s.jsx)(l.u,{align:"center",size:"md",children:d.substring(0,h)}),Object(s.jsxs)(l.e,{alignItems:"center",display:"flex",height:44,justifyContent:"center",marginTop:4,paddingY:1,children:[Object(s.jsx)(l.e,{maxWidth:"calc(100% - 80px)",marginStart:10,children:Object(s.jsx)(l.u,{align:"center",size:"md",truncate:!0,children:d.substring(h+1)})}),Object(s.jsx)(l.e,{"data-test-id":"nux-edit-name-btn",paddingX:1,children:Object(s.jsx)(l.w,{accessibilityLabel:a.a._("Edit Name","Botton that allows editing the user's name","Botton that allows editing the user's name"),bgColor:"transparent",icon:"edit",iconColor:"darkGray",onClick:this.toggleNameInput,size:"sm"})})]})]})})}),c&&Object(s.jsxs)(l.e,{alignItems:"start","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",marginTop:1,paddingY:1,children:[Object(s.jsx)(l.e,{width:"69%",children:Object(s.jsx)(l.ab,{errorMessage:p,id:"name",onChange:this.onNameChange,placeholder:a.a._("name"),size:"lg",type:"text",value:i})}),Object(s.jsx)(l.e,{"data-test-id":"nux-update-name-btn",marginStart:2,children:Object(s.jsx)(l.f,{accessibilityLabel:a.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user"),color:"gray",inline:!0,onClick:this.toggleNameInput,size:"lg",text:a.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user")})})]})]});return Object(s.jsxs)(r.Fragment,{children:[o&&Object(s.jsx)(_e.a,{authViewer:n,customTaglineText:a.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account","Title on modal for users to log in to an existing account after they accidentally created a new account"),hideAccountSwitchValueProp:!0,onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0}),Object(s.jsxs)(l.e,{direction:"column",display:"flex",height:"100%",minWidth:"100%",paddingX:8,paddingY:8,children:[Object(s.jsxs)(l.e,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"start",width:"100%",children:[Object(s.jsx)(Se.a,{delayOffset:-5,xRadiusAdjustment:40,children:Object(s.jsx)(l.e,{height:120,width:120,children:Object(s.jsx)(Oe.a,{name:i})})}),Object(s.jsx)(l.e,{alignItems:"center",marginTop:6,width:"100%",children:Object(s.jsx)(l.Y,{align:"center",size:"lg",truncate:!0,children:n.email})}),Object(s.jsx)(l.e,{alignItems:"end",display:"flex",marginTop:2,width:"100%",children:g}),Object(s.jsx)(l.e,{marginTop:p?0:6,width:"100%",children:t.length>120?Object(s.jsx)(l.Y,{align:"center",children:t}):Object(s.jsxs)(r.Fragment,{children:[Object(s.jsx)(l.Y,{align:"center",children:t.substring(0,u)}),Object(s.jsx)(l.Y,{align:"center",children:t.substring(u)})]})})]}),Object(s.jsx)(l.e,{"data-test-id":"nux_name_done_btn",marginTop:8,children:Object(s.jsx)(l.f,{accessibilityLabel:a.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:!!p,onClick:this.continueAndSave,size:"lg",text:a.a._("Next","next nux step button","next nux step button"),type:"button"})}),Object(s.jsx)(ve.a,{name:"web_remove_nux_welcome_footer",children:({anyEnabled:e})=>e?null:Object(s.jsx)(l.e,{marginBottom:5,marginTop:5,children:Object(s.jsxs)(l.X,{fullWidth:!1,onTap:this.handleNotYouClick,children:[Object(s.jsx)(l.Y,{align:"center",size:"sm",children:a.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account","subtitle to ask users who create a new account if they meant to log in to an existing account")}),Object(s.jsx)(l.Y,{align:"center",size:"sm",weight:"bold",children:Object(s.jsx)(Ce.a,{href:"#",children:a.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account","Link allowing users who just created a new account the option to log in instead into an existing account")})})]})})})]})]})}}function Pe(e){const t=Object(q.a)(),n=Object(i.useDispatch)();return t.isAuth?Object(s.jsx)(Ee,{...e,authViewer:t,dispatch:n}):null}var Re=n("pWI6"),Le=n("EC67");function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ue extends r.Component{constructor(...e){super(...e),Ae(this,"state",{followedInterests:[],isLoading:!1,nuxStep:this.getNextStepIndex(-1,this.props.steps,!1),selectedInterests:[],userClickedBack:!1}),Ae(this,"onComplete",()=>{const{handleComplete:e,isLandingPage:t,isRenux:n,dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:s}=this.props;Object(x.b)(4105,{view:n?213:24,viewParameter:171}),n||s(!0),e(),t&&this.handleNavigate("/")}),Ae(this,"mounted",!1),Ae(this,"handleNavigate",e=>{const{history:t}=this.props;t.push({pathname:e,state:{completedNux:!0}})}),Ae(this,"handleSelectedInterestsChange",(e,t)=>{this.setState((n,s)=>{const r=this.getUpdatedSelectedInterests(n.selectedInterests,e,t),i=this.getUpdatedFollowInterests(n.followedInterests,e,t),{dispatchSetNuxSelectedInterestImages:o}=s;return o(r.reduce((e,t)=>{if(t&&t.images&&t.images["400x"]){const n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e},[])),{selectedInterests:r,followedInterests:i}})}),Ae(this,"nuxSteps",{NuxWelcomeNameStep:Pe,NuxGenderStep:B,NuxLocaleCountryStep:$,NuxPicker:we,NuxExtensionUpsell:T,NuxEducationLoader:y}),Ae(this,"onPrevStepClickFn",e=>{const{steps:t,isRenux:n}=this.props,s=t[e].moduleName;return()=>{const t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:172}[s];t&&Object(x.b)(101,{component:17,element:34,view:n?213:24,viewParameter:t}),e>0&&this.setState({nuxStep:e-1,userClickedBack:!0})}})}componentDidMount(){const{isRenux:e,isSimpleRenux:t,requestContext:{experiments:n}}=this.props;e&&!t&&(n.getWithActivation("web_renux_topic_two_step"),n.getWithActivation("web_renux_topic_two_step_row")),this.mounted=!0,Object(x.b)(4104,{view:e?213:24,viewParameter:170})}componentWillUnmount(){this.mounted=!1}getUpdatedFollowInterests(e,t,n){let s=[...e];return t.forEach(e=>{const t={...e,is_followed:n};let r=!1;s=s.map(e=>e.id===t.id?(r=!0,t):e),r||s.push(t)}),s}getUpdatedSelectedInterests(e,t,n){let s=[...e];return t.forEach(t=>{const r=Object(o.b)(s,t);n&&!r?s.push({...t,is_followed:n}):!n&&r&&(s=e.filter(e=>e.id!==t.id))}),s}getPersonalizationCopy(e){const{hideFollowedInterests:t,isRenux:n,isSimpleRenux:s,steps:r}=this.props;let i,o;const c=e.moduleName,l=r.map(e=>e.moduleName).indexOf(c)===r.length-2;switch(c){case"NuxWelcomeNameStep":return{headerText:a.a._("Welcome to Pinterest","greeting on welcome name step","greeting on welcome name step"),subHeaderText:a.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step","header on nux welcome and name editing step")};case"NuxGenderStep":return i=a.a._("How do you identify?","Header in NUX gender step.","Header in NUX gender step."),o="",n&&(i=a.a._("It’s time to refresh your feed!","Title on the modal asking user's gender","Title on the modal asking user's gender"),o=a.a._("How would you describe yourself?","Subtitle on the modal asking user's gender","Subtitle on the modal asking user's gender")),{headerText:i,subHeaderText:o};case"NuxLocaleCountryStep":return{headerText:a.a._("Pick your language and country/region","Header in NUX locale/country step","Header in NUX locale/country step")};case"NuxPicker":return n&&t?(i=a.a._("What are you into these days?","Header in ReNUX topic picker step.","Header in ReNUX topic picker step."),o=a.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.","Subheader in ReNUX topic picker step.")):s?(i=a.a._("Which topics do you want to see more of?","nux.topicPicker.heading","Header in NUX topic picker step for topic education experience."),o=a.a._("Ideas you see in your home feed are based on topics you like","nux.topicPicker.subheading","Subheader in NUX topic picker step for topic education experience.")):i=l?a.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."):a.a._("Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."),{headerText:i,subHeaderText:o};case"NuxExtensionUpsell":return i=l?a.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."):a.a._("Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."),{headerText:i,subHeaderText:a.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step","Subheader in NUX browser extension upsell step")};default:return{}}}nuxStepToRender(e,t){const{hideFollowedInterests:n,isRenux:r,isSimpleRenux:i,requestContext:o}=this.props,{followedInterests:a,selectedInterests:c}=this.state,l=e.moduleName,u=this.nuxSteps[l],d=this.hasNuxStep("NuxGenderStep"),h=r&&n?w.p:w.d;return Object(s.jsx)(u,{experiments:o.experiments,followedInterests:a,hasGenderStep:d,hideFollowedInterests:n,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isRenux:r,isSimpleRenux:i,numberToFollow:h,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),requestContext:o,selectedInterests:c,showTableOfContents:t,toggleLoadingIndicator:e=>this.setState({isLoading:e})})}getNextStepIndex(e,t,n){const{isRenux:s}=this.props;let r=e+1;if(n)return r;if(!s)for(;r<t.length&&t[r].isCompleted;)r+=1;return r}incrementNuxStep(e){const{steps:t}=this.props,{userClickedBack:n}=this.state,s=this.getNextStepIndex(e,t,n);return s>=t.length?this.onComplete:()=>{(t=>{if(e!==t)this.setState({nuxStep:t})})(s)}}hasNuxStep(e){const{steps:t}=this.props;return t.some(t=>t.moduleName===e)}render(){const{handleDismiss:e,isLandingPage:t,isRenux:n,isSimpleRenux:r,steps:i}=this.props,{isLoading:o,nuxStep:a}=this.state,c=e=>["NuxEducationLoader"].includes(e),l=i.filter(e=>!c(e.moduleName)),u=c(i[a].moduleName)||t,d=n?!u&&!r&&a>0:!u&&!r&&a>1;return Object(s.jsx)(K.a,{currentIndex:a,hideDots:n||r||u,isLoading:o,numSteps:l.length,onClose:u||!n&&!r?void 0:e,onPrevStepClick:d?this.onPrevStepClickFn(a):void 0,stepName:i[a].moduleName,children:this.nuxStepToRender(i[a],!u)})}}function Be(e){const t=Object(i.useDispatch)();return Object(s.jsx)(Ue,{...e,dispatchSetNuxSelectedInterestImages:e=>t(Object(Re.a)(e)),dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:e=>t(Object(k.c)(e)),history:Object(Le.g)(),requestContext:Object(Y.d)()})}Ae(Ue,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1})},SCuf:function(e,t,n){n.d(t,"a",(function(){return o}));var s=n("nKUr"),r=n("yweb"),i=n("n6mq");function o(){const e=Object(r.b)();return Object(s.jsx)(i.e,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(s.jsx)(i.R,{accessibilityLabel:e._("Loading signup form"),show:!0})})}},VL22:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var s=n("17x9"),r=n.n(s),i=n("kmwA");const o={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},a=e=>e.facebook_id?o.FACEBOOK:e.google_open_id_token?o.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?o.GOOGLE:e.email?o.EMAIL:o.OTHER,c=(r.a.shape({credentials:r.a.shape({}),userData:r.a.shape({}),type:r.a.oneOf(Object.values(o))}),(e="")=>e in i.a.settings.MINIMUM_AGE_BY_EU_COUNTRY),l=e=>i.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)||i.a.settings.LATAM_AGE_COLLECTION.has(e)},XocW:function(e,t,n){var s=n("nKUr"),r=n("q1tI"),i=n("EgnG"),o=n("Ye/N"),a=n("D2p8"),c=n("b7nI"),l=n("TgLd"),u=n("QAzJ"),d=n("pLLR"),h=n("n6mq");const p=600,g=640,b=520,m=816,f=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"];t.a=Object(r.memo)((function({children:e,currentIndex:t,hideDots:n,inUsecaseQuiz:x,isLoading:j,numSteps:w,onClose:_,onPrevStepClick:O,stepName:y}){const{anyEnabled:S,group:v}=Object(u.a)("web_nux_modal_gestalt"),{isRTL:k}=Object(d.d)(),C=Object(r.useRef)(),I=Object(r.useRef)(),T=(e=>f.includes(e))(y),N=Object(r.useCallback)(e=>{var t;null!=e&&null!==(t=e.previousSibling)&&void 0!==t&&t.style&&"enabled_bg"===v&&(e.previousSibling.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.previousSibling.style.opacity=1),C.current=e},[v]);Object(r.useEffect)(()=>(S||(document.body&&(document.body.style.overflow="hidden"),a.c.pause()),()=>{S||(document.body&&(document.body.style.overflow=""),a.c.resume())}),[]),Object(r.useEffect)(()=>{S&&(()=>{if(!C.current||!I.current)return;const e=!T;Object(i.a)({targets:C.current,duration:e?500:0,width:e?[b,m]:[m,b],easing:"linear",fillMode:"forwards"}),Object(i.a)({targets:I.current,duration:e?500:0,height:e?[p,g]:[g,p],easing:"linear",fillMode:"forwards"})})()},[T]);const E=Object(s.jsxs)(r.Fragment,{children:[j&&Object(s.jsx)(c.a,{}),!!O&&Object(s.jsx)(h.e,{left:!k,right:k,marginStart:5,marginTop:5,minHeight:40,position:"absolute",top:!0,children:Object(s.jsx)(h.w,{accessibilityLabel:o.a._("Go back to previous step","Accessibility label on NUX back button","Accessibility label on NUX back button"),icon:"directional-arrow-left",iconColor:"darkGray",onClick:O,size:"md"})}),!n&&Object(s.jsx)(h.e,{alignItems:"center",alignSelf:"center",display:"flex",height:16,justifyContent:"evenly",marginBottom:4,marginEnd:4,marginStart:4,marginTop:8,minHeight:16,width:40*w,children:[...Array(w).keys()].map(e=>{const n=e>t,r=n?"6px":"10px";return Object(s.jsx)(h.e,{color:n?"gray":"darkGray","data-test-id":"nux-toc-dot",height:r,rounding:"circle",width:r},e)})}),!!_&&Object(s.jsx)(h.e,{dangerouslySetInlineStyle:{__style:x?{zIndex:1}:{}},marginEnd:6,marginTop:6,minHeight:40,position:"absolute",right:!0,top:!0,children:Object(s.jsx)(h.w,{accessibilityLabel:o.a._("cancel","close nux modal","close nux modal"),icon:"cancel",iconColor:"darkGray",onClick:_,size:"sm"})}),Object(s.jsx)(h.e,{flex:"grow",height:"100%",width:"100%",children:e})]});return S?Object(s.jsx)(l.b,{accessibilityModalLabel:"nux",closeOnOutsideClick:!1,onDismiss:()=>{},modalRef:N,size:T?b:m,children:Object(s.jsx)(h.e,{direction:"column",display:"flex",height:T?p:g,position:"relative",ref:I,children:E})}):Object(s.jsx)(h.z,{children:Object(s.jsx)(h.e,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",top:!0,width:"100vw",children:Object(s.jsx)(h.e,{color:"white",dangerouslySetInlineStyle:{__style:{transition:T?"":"width 0.5s, height 0.5s",borderRadius:"32px"}},direction:"column",display:"flex",height:T?p:g,position:"relative",rounding:2,width:T?b:m,children:E})})})}))},"YI5+":function(e,t,n){n.d(t,"a",(function(){return l}));var s=n("nKUr"),r=n("Ye/N"),i=n("ihsa"),o=n("28DW"),a=n("n6mq");const c={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}};function l(e){const t=e=>{Object(o.a)("unauth.account_switcher_modal."+e)},{renderContent:n}=e;return Object(s.jsxs)("div",{style:c.mask,children:[Object(s.jsx)(i.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),Object(s.jsx)("div",{className:"AccountSwitcherModal",onClick:()=>{t("empty_space_click");const{onCloseClick:n}=e;n()},role:"dialog",style:c.scroller,children:Object(s.jsxs)("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:c.modalContainer,children:[n(),Object(s.jsx)("button",{"aria-label":r.a._("close","accessible label for close button","accessible label for close button"),onClick:()=>{t("close_button_click");const{onCloseClick:n}=e;n()},style:c.closeButton,children:Object(s.jsx)(a.v,{accessibilityLabel:r.a._("close","accessible label for close button","accessible label for close button"),color:"white",icon:"cancel",inline:!0})})]})})]})}},bBqG:function(e,t,n){var s=n("IDoE"),r=n("ipvL"),i=n("zRck"),o=n("28DW"),a=n("7Cbv");t.a=(e,t,n)=>{let c=r.a.getGroupId();c||(c=(()=>{const e=Object(a.a)();return Object(o.g)("web_account_switcher.utils.group_created",{group_id:e,group_count:Object(s.a)()}),e})(),r.a.setGroupId(c));const l={group_id:c,group_count:Object(s.a)()};let u="";n&&(u=n===i.c?"modal.":"flyout."),Object(o.g)(`web_account_switcher.${u}${e}`,Object.assign({},t,l))}},dish:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var s=n("QLqj");const r=()=>s.b.localStorage.getItem("uoiou")||!1,i=e=>{s.b.localStorage.setItem("uoiou",!!e)}},gYog:function(e,t,n){n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var s=n("q1tI"),r=n("/MKj"),i=n("ZbwW"),o=n("D2p8"),a=n("U4JR");const c={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061}};function l({closeupImpressionType:e,closeupNavigationType:t,componentType:n,contextLogData:l,elementType:u,impressionAuxFields:d,inImpressionExp:h,impressionType:p,impressionsFramework:g,isPaused:b,loggingId:m,objectIdStr:f,slotIndex:x,trackCarousel:j,viewData:w,viewParameter:_,viewType:O}){const y=Object(r.useSelector)(({pins:e})=>e),S=Object(i.a)(y[m||""]||{}),v=g||o.c,k=Object(s.useRef)(null),C=s=>{const r=c[p],i=r.idType,o={endTime:s.endTime,[i]:m,slotIndex:x,time:s.startTime,renderDuration:s.endTime-s.startTime,type:e,...d,forcedExit:"removed"===s.forcedExit?0:void 0},h={component:n,objectIdStr:f,view:O,viewData:w||{},viewParameter:_,...l};j?S&&Object(a.b)(7352,{eventData:{pinCarouselSlotImpressions:[{...o,carouselDataId:Number(S.id),carouselSlotId:S.carousel_slots[S.index]&&Number(S.carousel_slots[S.index].id),slotIndex:S.index}]},...h}):Object(a.b)(r.eventType,{closeup_navigation_type:t,element:u,eventData:{[r.impressionType]:[o]},...h})},I=Object(s.useCallback)(()=>{try{k.current instanceof HTMLElement&&v.start(k.current).onExitViewport(C).setDebugId(m||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}},[k.current]);Object(s.useEffect)(()=>(h&&!v.inExperiment&&v.setExperimentStatus(!0),b||I(),()=>{k.current instanceof HTMLElement&&v.stop(k.current)}),[I]);const T=Object(s.useRef)(b);return Object(s.useEffect)(()=>{T.current&&!b&&I(),T.current=b},[b,I]),k}const u=({children:e,...t})=>e({impressionTrackerRef:l(t)})},ipvL:function(e,t,n){var s=n("0G5S"),r=n("zRck");const i=e=>"undefined"!=typeof window?Object(s.a)(e):null,o=(e,t)=>{"undefined"!=typeof window&&Object(s.c)(e,t)},a={getAccounts:()=>i(r.p),getAccountsJSON:()=>a.getAccounts()?JSON.parse(a.getAccounts()):{},getGroupId:()=>{const e=i(r.q);return e?JSON.parse(e):null},setAccounts:e=>o(r.p,e),setGroupId:e=>o(r.q,JSON.stringify(e))};t.a=a},kJuv:function(e,t,n){var s=n("eOdZ"),r=n("QLqj"),i=n("kmwA"),o=n("J8m7"),a=n("AXUD"),c=n("dish"),l=n("VL22"),u=n("OX7c"),d=n("28DW"),h=n("yM2L");const p=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?l.a.FACEBOOK:e.google_open_id_token?l.a.GOOGLE_ONE_TAP:e.gplus_id_token?l.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?l.a.EMAIL:l.a.OTHER},g=function(e,t,n=!1){let s="referrer_unknown";try{const e=document.referrer;s=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(l){}const r=p(e),i=t===Object(t)?t.hybridTier:"tier_unknown",o=t===Object(t)?t.container:"container_unknown";Object(d.a)("login.referrer."+s+"."+r),Object(d.a)("login.container."+o+"."+r),Object(d.a)("login.type."+r);const a=p(e)||"method_unknown",c=t.page||"page_unknown";e.gplus_autologin?n?(Object(d.a)("mweb_autologin.google_success"),Object(d.h)("new_mweb_autologin_google",{page:c,referrer:s,container:o,hybridTier:i})):(Object(d.a)("web_autologin_google"),Object(d.h)("new_web_autologin_google",{page:c,referrer:s,container:o,hybridTier:i})):e.facebook_autologin?(Object(d.a)("web_autologin_facebook"),Object(d.h)("new_web_autologin_facebook",{page:c,referrer:s,container:o,hybridTier:i})):(Object(d.a)(`web_login.${a}.success.${c}.${o}.${s}.${i}`),Object(d.h)(`new_web_login.${a}.success`,{page:c,referrer:s,container:o,hybridTier:i}))},b=(e,t)=>{Object(d.a)(`web_cross_domain_login.${e}.${p(t)}`)},m=(e,t,n="unknown_source",s=!1)=>{if(e){const r=e.http_status===a.b?a.b:e.api_error_code;let i=r;o.b.has(r)&&(i=o.b.get(r));const{container:c}=t;s?Object(d.a)(`unauth_web_client_cctld_login_api_error.${String(i)}.${c||"unknow_container"}.${n}`):Object(d.a)(`unauth_web_client_login_api_error.${String(i)}.${c||"unknow_container"}.${n}`)}};t.a=function(e,t,n={},o=!1,a,l,d=!1){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==i.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(t.origin))return function(e,t,n,s){b("attempt",e);const{referrer:r,facebookToken:i,unauthId:o}=s;return Object(h.loginUser)(e,{recaptchaV3Token:t,referrer:r,facebookToken:i,unauthId:o}).then(t=>{if(t&&t.data){b("success_with_token",e);const s=t.data;return Object(h.exchangeTokenAndSetSession)(s).then(t=>(b("success_token_exchanged",e),g(e,n),Promise.resolve()),t=>{throw b("success_token_not_exchanged",e),t})}throw b("success_without_token",e),new Error},t=>{throw b("failure",e),m(t,n,p(e),!0),t})}(e,l,n,t)}const f=o?null:r.b.localStorage.getItem("visitedPagesBeforeLogin"),x={...e,get_user:e.get_user||e.switch_account&&o,app_type_from_client:7===t.appType?7:5,visited_pages_before_login:f?JSON.stringify(f):null,recaptchaV2Token:a,recaptchaV3Token:l};return s.a.create("UserSessionResource",x).callCreate({showError:!1,async:!0}).then(t=>(g(e,n,d),Object(c.b)(!1),Object(u.a)("login").then(()=>t)),t=>(m(t,n,p(e)),Promise.reject(t)))}},"liz/":function(e,t,n){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return m}));var s=n("NwVv"),r=n("TPPM"),i=n("xGpI");n.d(t,"d",(function(){return i.a}));var o=n("ipvL"),a=n("bBqG");n.d(t,"i",(function(){return a.a}));var c=n("D2p8"),l=n("zRck"),u=n("IDoE");n.d(t,"c",(function(){return u.a}));n("+6dQ");const d=4,h=()=>({[l.p]:o.a.getAccountsJSON(),[l.q]:o.a.getGroupId()}),p=e=>{const t=o.a.getAccountsJSON();delete t[e],o.a.setAccounts(JSON.stringify(t))},g=(e,t)=>{if(!o.a.getAccounts()||e&&!(e.id in Object(i.a)())){if(e.partner&&e.partner.is_linked_business&&t)return void Object(s.a)({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});Object(s.a)(e)}},b=(e,t,n)=>{Object(a.a)("switch_account_success",{destination_user_id:t},n),Object(r.a)(e)},m=(e,t)=>{c.c.resume(c.a),Object(a.a)("switch_account_failure",{destination_user_id:e},t)}},nMRj:function(e,t,n){var s=n("nKUr"),r=n("n6mq");const i={backgroundColor:"#efefef"},o={transition:"width .4s ease-out"};function a(e,t){return Object.assign({},o,{width:e+"%",borderRadius:t})}t.a=({color:e="darkGray",height:t=8,progress:n=0,outerBorderRadius:o="10px",innerBorderRadius:c="inherit"})=>{return Object(s.jsx)(r.e,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:(l=t,u=o,Object.assign({},i,{height:l+"px",borderRadius:u}))},children:Object(s.jsx)(r.e,{height:"inherit",color:e,dangerouslySetInlineStyle:{__style:a(n,c)}})});var l,u}},ozRy:function(e,t,n){n.d(t,"a",(function(){return C}));var s=n("nKUr"),r=n("q1tI"),i=n("FDmi"),o=n("n6mq");function a({account:e,large:t,viewerId:n}){const{email:r,fullName:a,id:c,imageMediumUrl:l,username:u}=e;if(n===c)return null;const d=!(null!=l&&l.includes("static/images/user/default"));return Object(s.jsxs)(o.e,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%",children:[Object(s.jsx)(o.e,{paddingX:1,children:Object(s.jsx)(i.a,{accessibilityLabel:"",name:null!=a?a:u,src:d?l:"",size:t?"lg":"md"})}),Object(s.jsxs)(o.e,{marginStart:3,flex:"grow",children:[Object(s.jsx)(o.Y,{color:"darkGray",truncate:!0,weight:"bold",children:a||u}),r&&Object(s.jsx)(o.Y,{color:"darkGray",truncate:!0,children:r})]})]})}var c=n("0Bqi");var l=e=>{const t=Object.keys(e.accounts).length;return Object(s.jsxs)(o.e,{position:"relative",children:[Object(s.jsx)(o.e,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),Object(s.jsx)("ul",{children:Object.keys(e.accounts).map(t=>{const n=e.accounts[t];return Object(s.jsx)("li",{children:Object(s.jsx)(o.X,{onTap:()=>e.onClick(n),children:Object(s.jsx)("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"},children:Object(s.jsx)(a,{account:n})})})},t)})})]})},u=n("h4v/"),d=n("OCob"),h=n("Ye/N"),p=n("b7nI"),g=n("kJuv"),b=n("qD10"),m=n("eOdZ"),f=n("NdXn"),x=n("gC5q"),j=n("zRck"),w=n("U4JR"),_=n("w70y"),O=n("liz/");function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends r.Component{constructor(...e){super(...e),y(this,"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),y(this,"handleAddAccount",()=>{Object(O.i)("add_account_click",null,this.props.container),this.props.container===j.c&&this.props.showLogin?this.props.showLogin():this.setState({showLoginModal:!0})}),y(this,"trackProfileNavigateClick",e=>{Object(O.i)(`current_profile_${e}_click`,null,this.props.container)}),y(this,"handleSwitch",e=>{const{container:t}=this.props;this.setState({isLoading:!0}),Object(w.b)(101,{component:13369,element:11196}),Object(O.i)("switch_account_click",{destination_user_id:e.id},t);const n={get_user:!0,switch_account:e.id};u.a.getInstance().pauseImpressionsAndFlush(),Object(g.a)(n,Object(d.a)(),{container:"account_switcher"},!0).then((n={})=>{if(n.resource_response&&n.resource_response.data&&n.resource_response.data.success){const n="/"+e.username;Object(O.f)(n,e.id,t)}else Object(O.e)(e.id,t),this.setState({failedAccount:e,isLoading:!1})},n=>{throw Object(O.e)(e.id,t),this.setState({isLoading:!1}),n})}),y(this,"handleLinkedAccountSwitch",e=>{const{authViewer:t,container:n}=this.props;if(this.setState({isLoading:!0}),Object(w.b)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),u.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){const t={business_id:e.id,get_user:!0};Object(g.a)(t,Object(d.a)(),{container:"account_switcher"},!0).then((t={})=>{Object(O.f)("/",e.id,n)},t=>{throw Object(O.e)(e.id,n),this.setState({isLoading:!1}),t})}else m.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{Object(O.h)(t.id),Object(O.f)("/"+e.username,t.id,n)},e=>{throw Object(O.e)(t.id,n),this.setState({isLoading:!1}),e})}),y(this,"handleCloseModal",()=>this.setState({showLoginModal:!1})),y(this,"handleReauthAccount",()=>{Object(O.i)("switch_failure_prompt.login_click",null,this.props.container),this.setState({failedAccount:null,showLoginModal:!0})}),y(this,"handleRemoveUnauthAccount",e=>{Object(O.i)("switch_failure_prompt.account_removed",{removed_user_id:e},this.props.container),Object(O.h)(e),this.setState({failedAccount:null})}),y(this,"getBusinessAccounts",()=>{const{businessUserResource:e,authViewer:{partner:t}}=this.props;if(!e.data)return null;return(t&&t.is_linked_business?e.data.owners:e.data.businesses).reduce((e,t)=>(e[t.id]=Object(x.a)(f.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e),{})}),y(this,"renderAccounts",e=>Object.keys(e).map((t,n)=>Object(s.jsxs)("li",{children:[Object(s.jsx)(o.X,{onTap:()=>{this.handleSwitch(e[t])},children:Object(s.jsx)("div",{className:"AccountSwitcherListItem",style:{height:"auto"},children:Object(s.jsx)(a,{large:!0,account:e[t],viewerId:this.props.authViewer.id})})}),n!==O.a-2&&Object(s.jsx)(o.o,{})]},n))),y(this,"renderPinnerButtons",e=>{const{onNavigateButtonClick:t}=this.props;return Object(s.jsx)(b.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`,children:Object(s.jsx)(o.f,{text:h.a._("View profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:h.a._("Go to current profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}})})}),y(this,"renderBusinessButtons",e=>{const{onNavigateButtonClick:t}=this.props;return Object(s.jsxs)(o.e,{display:"flex",children:[Object(s.jsx)(o.e,{marginEnd:2,children:Object(s.jsx)(b.a,{to:"/business/hub/",onClick:()=>{Object(w.b)(101,{element:11236}),t&&t()},children:Object(s.jsx)(o.f,{text:h.a._("Business hub","Link to Business hub from account switcher","Link to Business hub from account switcher"),accessibilityLabel:h.a._("Go to Business hub","Visit the Business hub for the current business user","Visit the Business hub for the current business user"),size:"sm",color:"red"},"biz-hub-button")})}),Object(s.jsx)(b.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`,children:Object(s.jsx)(o.f,{text:h.a._("Profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:h.a._("Go to current user profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}})})]})})}componentDidMount(){this.props.container===j.c&&Object(O.i)("modal.shown")}componentWillUnmount(){this.props.container===j.c&&Object(O.i)("modal.dismiss")}renderLoadingIndicator(){return this.state.isLoading?Object(s.jsx)(p.a,{}):null}render(){var e,t;const{authViewer:n}=this.props,{failedAccount:r,isLoading:u,showLoginModal:d}=this.state,p=Object(O.d)(),g=this.getBusinessAccounts(),m=Object.keys(p).length,f=p[n.id];delete p[f.id];const x=f.imageLargeUrl&&!f.imageLargeUrl.includes("static/images/user/default");return Object(s.jsxs)(o.e,{flex:"grow",children:[d&&Object(s.jsx)(c.a,{container:this.props.container,onClose:this.handleCloseModal,email:r?r.email:""}),r?Object(s.jsxs)(o.e,{paddingX:4,paddingY:4,flex:"grow",children:[Object(s.jsx)(o.e,{marginBottom:3,children:Object(s.jsx)(o.Y,{children:h.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it")})}),Object(s.jsx)(a,{viewerId:f.id,account:r}),Object(s.jsx)(o.e,{marginTop:4,children:Object(s.jsx)(o.f,{text:h.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})}),Object(s.jsx)(o.e,{marginTop:3,children:Object(s.jsx)(o.f,{text:h.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:()=>this.handleRemoveUnauthAccount(r.id)})})]}):Object(s.jsxs)(o.e,{children:[u&&this.renderLoadingIndicator(),Object(s.jsxs)(o.e,{children:[Object(s.jsxs)(o.e,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}},children:[Object(s.jsx)(o.e,{marginEnd:4,children:Object(s.jsx)(b.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${f.username}/`,children:Object(s.jsx)(o.X,{onTap:()=>this.trackProfileNavigateClick("avatar"),children:Object(s.jsx)(i.a,{name:f.fullName||f.username,size:"lg",src:x?f.imageLargeUrl:""})})})}),Object(s.jsxs)(o.e,{flex:"grow",children:[Object(s.jsxs)(o.e,{marginBottom:2,children:[Object(s.jsx)(o.Y,{color:"darkGray",truncate:!0,weight:"bold",children:f.fullName||f.username}),f.email&&Object(s.jsx)(o.Y,{color:"darkGray",truncate:!0,children:f.email})]}),n.partner?this.renderBusinessButtons(f.username):this.renderPinnerButtons(f.username)]})]}),g?Object(s.jsx)(l,{accounts:g,onClick:this.handleLinkedAccountSwitch}):null,Object(s.jsx)(o.o,{}),null!==(e=n.partner)&&void 0!==e&&e.is_linked_business?null:Object(s.jsx)(o.e,{children:Object(s.jsx)("ul",{children:this.renderAccounts(p)})})]}),m<O.a&&!(null!==(t=n.partner)&&void 0!==t&&t.is_linked_business)&&Object(s.jsx)(o.e,{paddingX:4,paddingY:3,children:Object(s.jsx)(o.f,{text:h.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:()=>this.handleAddAccount()})})]})]})}}function v(e){const t=Object(_.a)({name:"UserResource",options:{field_set_key:"linked_partner",user_id:e.authViewer.id}});return Object(s.jsx)(S,{...e,businessUserResource:t})}var k=n("TgLd");function C({authViewer:e,customTaglineText:t,hideAccountSwitchValueProp:n,onDismiss:i,showAddAccount:a}){const[l,u]=Object(r.useState)(Boolean(a)),d=Object(_.a)({name:"UserResource",options:{username:e.username,field_set_key:"linked_partner"}});Object(r.useEffect)(()=>{Object(O.g)(e,d.data)},[]);return l?Object(s.jsx)(c.a,{container:j.c,onClose:a?i:()=>u(!1),customTaglineText:t,hideAccountSwitchValueProp:n}):Object(s.jsx)(o.e,{position:"relative",children:Object(s.jsx)(k.b,{accessibilityModalLabel:h.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts","modal which allows user to add and switch multiple accounts"),size:"sm",heading:h.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),onDismiss:i,children:Object(s.jsx)(v,{authViewer:e,container:j.c,onNavigateButtonClick:()=>i(),showLogin:()=>u(!0)})})})}},pWI6:function(e,t,n){function s(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}n.d(t,"a",(function(){return s}))},vVbV:function(e,t,n){function s(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return s}))},xGpI:function(e,t,n){var s=n("ipvL");t.a=()=>s.a.getAccountsJSON()},yM2L:function(e,t,n){n.r(t),n.d(t,"exchangeTokenAndSetSession",(function(){return u})),n.d(t,"verifyLoggedInStatus",(function(){return d})),n.d(t,"registerUser",(function(){return h})),n.d(t,"loginUser",(function(){return p}));var s=n("T0g9"),r=n("eOdZ"),i=n("kmwA"),o=n("28DW"),a=n("J8m7");const c=i.a.settings.ACCOUNTS_PINTEREST_URL,l=(e,t,n,s)=>{const r=e=>{const t=new Error(e.statusText);throw t.response=e,!t.api_error_code&&t.response&&(t.api_error_code=t.response.code,t.message=t.response.message),t},i={credentials:"include",mode:"cors"};return"POST"===n&&(i.method="POST",i.body=t,i.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":s},s||Object(o.a)("unauth.auth_handshake.cross_domain.no_unauth_id."+n)),fetch(e,i).then(e=>200===e.status||401===e.status||409===e.status?e:(r(e),{})).then(e=>e.json()).then(e=>"success"===e.status?Promise.resolve(e):e.code===a.r?(e.api_error_code=e.code,Promise.reject(e)):(r(e),{})).catch(e=>{throw e})},u=(e,t=!1)=>r.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),d=e=>{l(c+"/v3/handshake/verify/","","GET",e).then(e=>{if(e&&e.data){const t=e.data;u(t).then(e=>{window.location.reload()},e=>{})}},e=>{})},h=(e,{facebookToken:t,inviteCode:n,locale:r,referrer:o,unauthId:a})=>{const c=(e.business_name?"partner/handshake":(e.gplus_code||e.gplus_id_token)&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"email/handshake",u={};if(u.email=e.email||"",u.username=e.username||"",u.password=e.password||"",u.first_name=e.first_name||"",u.last_name=e.last_name||"",u.country=e.country||"",u.locale=r,u.referrer=o,e.age){const t=new Date;t.setFullYear(t.getFullYear()-e.age);const n=parseInt(t/1e3,10);u.birthday=n.toString()}if(e.custom_gender&&(u.custom_gender=e.custom_gender),e.gender&&(u.gender=e.gender),e.business_name&&(u.account_type=e.account_type,u.business_name=e.business_name,u.first_name=e.business_name),n&&(u.invite_code=n),e.facebook_id){const n=t||e.facebook_token||"";u.facebook_id=e.facebook_id,u.facebook_token=n,u.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(u.password=e.password||"",u.one_time_code=e.gplus_code,u.id_token=e.gplus_id_token,u.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(u.recaptcha_v3_token=e.recaptchaV3Token),l(`${i.a.settings.ACCOUNTS_PINTEREST_URL}/v3/register/${c}/`,Object(s.a)(u),"POST",a)},p=(e,{facebookToken:t,recaptchaV3Token:n,referrer:r,unauthId:o})=>{const a=(e.mfa_token?"mfa/handshake":e.gplus_id_token&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"handshake",c={};if(e.username_or_email&&(c.username_or_email=e.username_or_email.trim(),c.password=e.password,c.referrer=r),e.facebook_id){const n=t||e.facebook_token||"";c.facebook_id=e.facebook_id,c.facebook_token=n,c.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(c.gplus_id_token=e.gplus_id_token,c.gplus_access_token=e.gplus_access_token,c.gplus_expires_at=e.gplus_expires_at,c.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(c.mfa_token=e.mfa_token),n&&(c.token=n),l(`${i.a.settings.ACCOUNTS_PINTEREST_URL}/v3/login/${a}/`,Object(s.a)(c),"POST",o)}},zRck:function(e,t,n){n.d(t,"p",(function(){return s})),n.d(t,"q",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"o",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"k",(function(){return g})),n.d(t,"j",(function(){return b})),n.d(t,"i",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return x})),n.d(t,"n",(function(){return j}));const s="MULTIPLE_ACCOUNTS",r="MULTIPLE_ACCOUNTS_GROUP",i="account_switcher_flyout",o="account_switcher_modal",a="vmp_account_switcher_modal",c="account_recovery",l="board_invite",u="closeup",d="followbtn",h="flashlight_grid",p="google_one_tap_modal",g="inspired_banner",b="hybrid_clickthrough",m="hybrid_banner",f="pin_image",x="response_flyout",j="unauth_header"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/RenuxContainerCommon-6f8e17137e3acac10895.mjs.map