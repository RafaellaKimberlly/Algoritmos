(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[101,107],{"/mzO":function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("nKUr"),o=n("Ye/N"),s=n("n6mq");function r({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:r,isManagedView:a,isNoTitle:c}){const d=a?6:c?0:3;return Object(i.jsxs)(s.e,{children:[!c&&Object(i.jsx)(s.o,{}),Object(i.jsxs)(s.e,{mdDisplay:"flex",justifyContent:"between",paddingX:a?0:4,paddingY:d,children:[!a&&!c&&Object(i.jsx)(s.e,{column:12,mdColumn:3,paddingY:2,children:Object(i.jsx)(s.Y,{size:"md",children:o.a._("Comment and Photo Permissions")})}),Object(i.jsxs)(s.e,{column:12,mdColumn:a?12:8,children:[Object(i.jsxs)(s.e,{paddingY:1,display:"flex",alignItems:"center",children:[Object(i.jsx)(s.T,{onChange:t,id:"CommentSwitch",switched:!e}),Object(i.jsx)(s.e,{paddingX:2,children:Object(i.jsx)(s.y,{htmlFor:"CommentSwitch",children:Object(i.jsx)(s.Y,{size:"md",children:o.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form")})})})]}),n&&Object(i.jsxs)(s.e,{paddingY:1,alignItems:"center",display:"flex",children:[Object(i.jsx)(s.T,{onChange:n,id:"PhotoSwitch",switched:!r}),Object(i.jsx)(s.e,{paddingX:2,children:Object(i.jsx)(s.y,{htmlFor:"PhotoSwitch",children:Object(i.jsx)(s.Y,{size:"md",children:o.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form")})})})]})]})]})]})}},"0BOE":function(e,t,n){n.d(t,"a",(function(){return s}));const i={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=i[e.charAt(n)]||e.charAt(n);return t},s=(e,t,n="name")=>{const i=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),i=e.split(" ");let s=0;for(let r=0;r<i.length;r+=1)(o(i[r]).includes(n[s])||i[r].includes(n[s]))&&(s+=1);return s===n.length})(e[n].toLowerCase(),i))}},"1+5i":function(e,t,n){var i=n("w/wX"),o=n("sEf8"),s=n("mdPL"),r=s&&s.isSet,a=r?o(r):i;e.exports=a},"1RGD":function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("nKUr"),o=n("q1tI"),s=n("Ye/N"),r=n("vvax"),a=n("n6mq");function c({header:e,onUpdate:t,value:n}){const[c,d]=Object(o.useState)(n?String(Math.floor(Number.parseInt(n,10)/60)):"0"),[l,u]=Object(o.useState)(n?String(Number.parseInt(n,10)%60):"0"),h=(e,n)=>{t(String(Number.parseInt(n,10)+60*Number.parseInt(e,10)))},p=[];for(let i=0;i<=9;i+=1)p.push({value:String(i),label:Object(r.b)(s.a.ngettext("{{ hours }} hour","{{ hours }} hours",i,"storyboard.detailsList.recipe","Option for number of hours a story pin recipe will take"),{hours:i}).join("")});const b=[];for(let i=0;i<60;i+=1)b.push({value:String(i),label:Object(r.b)(s.a.ngettext("{{ minutes }} minute","{{ minutes }} minutes",i,"storyboard.detailsList.recipe","Option for number of minutes a story pin recipe will take"),{minutes:i}).join("")});return Object(i.jsxs)(a.e,{width:"100%",display:"flex",alignItems:"end",children:[Object(i.jsx)(a.e,{width:"50%",marginEnd:2,children:Object(i.jsx)(a.P,{size:"lg",id:"hours",name:"hours",label:e,placeholder:s.a._("Hours","storyboard.detailsList.recipe","Placeholder caption for hours input in story pin recipe cooktime"),value:c,options:p,onChange:({value:e})=>{Number.isNaN(e)||(d(e),h(e,l))}})}),Object(i.jsx)(a.e,{width:"50%",marginStart:2,children:Object(i.jsx)(a.P,{size:"lg",id:"minutes",name:"minutes",placeholder:s.a._("Minutes","storyboard.detailsList.recipe","Placeholder caption for minutes input in story pin recipe cooktime"),value:l,options:b,onChange:({value:e})=>{Number.isNaN(e)||(u(e),h(c,e))}})})]})}},"3DIk":function(e,t,n){n.d(t,"a",(function(){return i}));const i="v2"},"3z7j":function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("Wer7");function o(e,t){return n=>n(Object(i.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},"5S2N":function(e,t,n){var i=n("nKUr"),o=n("q1tI"),s=n("/MKj"),r=n("9WJf"),a=n("BkRI"),c=n.n(a),d=n("/mzO"),l=n("JW66"),u=n("eOdZ"),h=n("5FNA"),p=n("Wer7");var b=n("Sihc"),j=n("Y+p1"),g=n.n(j),m=n("Ye/N"),f=n("TgLd"),x=n("GBVV"),y=n("4cpq"),O=n("M1Uz"),_=n("nGHF"),v=n("n6mq");function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w extends o.PureComponent{constructor(...e){super(...e),S(this,"state",{deleting:!1}),S(this,"unmounted",!1),S(this,"handleConfirm",()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),S(this,"handleDeleteDidComplete",e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast(({onHide:e})=>Object(i.jsx)(O.a,{onHide:e,text:m.a._("Pin deleted!","User deleted their pin","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return Object(i.jsx)(f.b,{heading:m.a._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:m.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:Object(i.jsxs)(v.e,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[Object(i.jsx)(v.e,{paddingX:1,children:Object(i.jsx)(v.f,{onClick:e,text:m.a._("Cancel")})}),Object(i.jsx)(v.e,{paddingX:1,children:Object(i.jsx)(y.a,{id:"confirm-delete-pin",children:Object(i.jsx)(x.b,{color:"red",onClick:this.handleConfirm,text:m.a._("Delete Pin"),submitting:t})})})]}),children:Object(i.jsx)(v.e,{padding:4,children:Object(i.jsx)(v.Y,{children:m.a._("Once you delete a Pin, you can't undo it!")})})})}}const C=Object(_.c)(w);C.displayName="DeletePinConfirmation";var I=C;function k({canEdit:e,onAltTextChange:t,altText:n}){return Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(v.o,{}),Object(i.jsxs)(v.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(i.jsx)(v.e,{column:12,mdColumn:3,paddingY:2,children:Object(i.jsx)(v.y,{htmlFor:"AltTextField",children:Object(i.jsx)(v.Y,{size:"md",children:m.a._("Alt text","EditPinModal.EditAltText","Label for editing alt text of pin")})})}),Object(i.jsx)(v.e,{column:12,mdColumn:8,children:e?Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(v.e,{children:Object(i.jsx)(v.ab,{id:"AltTextField",onChange:({value:e})=>t({value:e.slice(0,500)}),size:"lg",value:n||""})}),Object(i.jsx)(v.e,{justifyContent:"center",children:Object(i.jsx)(v.y,{htmlFor:"AltTextField",children:Object(i.jsx)(v.e,{marginTop:1,children:Object(i.jsx)(v.Y,{size:"md",color:"gray",children:m.a._("This helps people using screen readers understand what your Pin is about.","EditPinModal.EditAltText","Label for editing alt text of pin")})})})})]}):Object(i.jsx)(v.e,{column:12,mdColumn:8,paddingY:2,children:Object(i.jsx)(v.Y,{size:"md",weight:"bold",children:n})})})]})]})}var M=n("V711");function E({board:e={},canEdit:t,onBoardChange:n,onBoardCreate:o}){return Object(i.jsxs)(v.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(i.jsx)(v.e,{column:12,mdColumn:3,paddingY:2,children:Object(i.jsx)(v.y,{htmlFor:"BoardPicker",children:Object(i.jsx)(v.Y,{size:"md",children:m.a._("Board")})})}),t?Object(i.jsx)(v.e,{column:12,mdColumn:8,children:Object(i.jsx)(M.a,{id:"BoardPicker",board:e,onBoardChosen:n,onBoardCreate:o})}):e.name&&Object(i.jsx)(v.e,{column:12,mdColumn:8,paddingY:2,children:Object(i.jsx)(v.Y,{size:"md",weight:"bold",children:e.name})})]})}var P=n("TSYQ"),T=n.n(P),B=n("JKZO"),D=n("Q7uW"),R=n("U4JR");function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class N extends o.Component{constructor(...e){super(...e),L(this,"state",{focused:!1}),L(this,"suggestionAnchorRef",Object(o.createRef)()),L(this,"setRef",e=>this.textAreaRef=e),L(this,"handleBlur",e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)}),L(this,"handleFocus",e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t(e)}),L(this,"handleChange",({text:e,mentions:t})=>{this.props.onDescriptionChange({value:e,userMentionTags:t})})}render(){const{canAddUserMentionTags:e,canEdit:t,description:n,errorMessage:s,initialMentions:r,label:a,placeholder:c,onDescriptionChange:d}=this.props,{focused:l}=this.state;return Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(v.o,{}),Object(i.jsxs)(v.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(i.jsx)(v.e,{column:12,mdColumn:3,paddingY:2,children:Object(i.jsx)(v.y,{htmlFor:"DescriptionField",children:Object(i.jsx)(v.Y,{size:"md",children:a})})}),t?Object(i.jsxs)(v.e,{column:12,mdColumn:8,children:[Object(i.jsx)(v.e,{children:e?Object(i.jsx)("div",{className:T()("DescriptionField",{DescriptionField__error:!!s,DescriptionField__focus:l}),id:"DescriptionField",ref:this.suggestionAnchorRef,role:"textbox",children:Object(i.jsx)(B.a,{initialMentions:r,initialText:n,onAddMention:()=>{Object(R.b)(8905,{element:116,tag_type:1})},onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{Object(R.b)(8908,{element:116,tag_type:1})},onSuggestionsPopoverOpen:()=>{Object(R.b)(8907,{element:116,tag_type:1})},maxSuggestions:4,placeholder:c})}):Object(i.jsx)(v.Z,{id:"DescriptionField",placeholder:c,value:n,onChange:({value:e})=>{d({value:e,userMentionTags:[]})},hasError:(s||"").length>0})}),!!s&&Object(i.jsx)(v.e,{justifyContent:"center",children:Object(i.jsx)(D.a,{errorMessage:s,htmlFor:"pin-edit-description"})})]}):Object(i.jsx)(v.e,{column:12,mdColumn:8,paddingY:2,children:Object(i.jsx)(v.Y,{size:"md",weight:"bold",children:n})})]})]})}}var A=N,U=n("VJm5"),Y=n("rSLd"),F=n("xOLo");function H({isCarousel:e,onMouseEnter:t,onMouseLeave:n,shouldShowCarouselSliders:o,onCarouselSlide:s,currentIndex:r,carouselData:a,pinId:c,description:d,image:l={}}){return Object(i.jsxs)(v.e,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column",children:[e&&(()=>{const e=a&&a.carousel_slots&&a.carousel_slots.length||1;return e>=2&&Object(i.jsx)(v.e,{direction:"row",padding:2,children:Object(i.jsx)(v.y,{htmlFor:"CardsIndex",children:Object(i.jsxs)(v.Y,{size:"md",children:[r+1,"/",e]})})})})(),Object(i.jsx)(v.C,{width:236,children:Object(i.jsxs)(v.e,{onMouseEnter:t,onMouseLeave:n,children:[Object(i.jsxs)(v.C,{rounding:2,wash:!0,children:[e&&o&&Object(i.jsx)(v.e,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}},children:Object(i.jsx)(F.default,{handleCarouselSwipe:s,carouselIndex:r,carouselData:a,pinId:c,isEditMode:!0})}),e?Object(i.jsx)(U.a,{carouselIndex:r,isCloseup:!1,carouselData:a,pinId:c,isEditMode:!0}):Object(i.jsx)(v.x,{alt:d,color:"#efefef",naturalHeight:l.height,src:l.url,naturalWidth:l.width})]}),e&&Object(i.jsx)(Y.default,{carouselIndex:r,carouselData:a,pinId:c,handleCarouselSwipe:s,isEditMode:!0,variant:"legacy"})]})})]})}function z({apiErrorMessage:e,shouldShowGenericUpdateError:t,onClickDeleteButton:n,disableDelete:o,onHide:s,shouldDisableSave:r,triggerBoardAndSectionCreate:a}){return Object(i.jsxs)(v.e,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1,children:[Object(i.jsx)(y.a,{id:"delete-pin-button",children:Object(i.jsx)(v.f,{text:m.a._("Delete","EditPinModal.EditPinFooter.Delete","delete pin"),onClick:n,disabled:o})}),t&&Object(i.jsx)(v.e,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center",children:Object(i.jsx)(D.a,{errorMessage:e||m.a._("Sorry! There was an error editing your Pin.","EditPinModal.EditPinFooter.ErrorMessageToast","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})}),Object(i.jsxs)(v.e,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2,children:[Object(i.jsx)(v.e,{paddingX:2,children:Object(i.jsx)(v.f,{text:m.a._("Cancel","EditPinModal.EditPinFooter.Cancel","cancel changes"),onClick:s})}),Object(i.jsx)(v.e,{paddingX:2,"data-test-id":"edit-pin-save",children:Object(i.jsx)(v.f,{text:m.a._("Save","EditPinModal.EditPinFooter.Save","save changes"),color:"red",onClick:a,disabled:r})})]})]})}var G=n("NXrh");function V({board:e,canEdit:t,currentSection:n,onSectionChange:o,onSectionCreate:s,sectionId:r,sectionName:a}){const c=null!=e&&e.id?G.b:G.a;return Object(i.jsxs)(v.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(i.jsx)(v.e,{column:12,mdColumn:3,paddingY:3,children:Object(i.jsx)(v.y,{htmlFor:"SectionPicker",children:Object(i.jsx)(v.Y,{size:"md",children:m.a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")})})}),t&&e?Object(i.jsx)(v.e,{column:12,mdColumn:8,children:Object(i.jsx)(c,{board:e,onSectionChange:o,selectedSectionId:r,selectedSectionName:a,onSectionCreate:s})}):Object(i.jsx)(v.e,{column:12,mdColumn:8,paddingY:2,children:Object(i.jsx)(v.Y,{size:"md",weight:"bold",children:n&&!(e||{}).is_collaborative?n.title:m.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")})})]})}var W=n("VBRM"),q=n("8Enz"),Q=n("kT2/"),K=n("6HHy"),X=n("1RGD");function J({keyValueBlocks:e,listBlocks:t,onUpdateKeyValueBlock:n,onUpdateListBlocks:s,templateType:r}){return Object(i.jsxs)(v.e,{children:[1===r&&Object(i.jsxs)(o.Fragment,{children:[Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:m.a._("Cook time","editModal.editStoryPinModal.details.cookTime","Label for cook time detail")}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(X.a,{onUpdate:e=>n(0,e),value:e[0]||null})})]},"cooktime"),Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:m.a._("Servings","editModal.editStoryPinModal.details.servings","Label for serving size detail")}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(K.a,{showLabel:!1,onUpdate:e=>n(1,e),value:e[1]||null})})]},"servingSize")]}),2===r&&Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:m.a._("Difficulty","editModal.editStoryPinModal.details.difficulty","Label for difficulty level detail")}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(q.a,{showLabel:!1,onUpdate:e=>n(2,e),value:e[2]||null})})]},"difficulty"),Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:(()=>{switch(r){case 1:return m.a._("Ingredients","editModal.editStoryPinModal.listHeading","Heading for an ingredients list");case 2:return m.a._("Supplies","editModal.editStoryPinModal.listHeading","Heading for a supplies list");default:return m.a._("What they'll need","editModal.editStoryPinModal.listHeading","Heading for a generic list")}})()}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(Q.a,{listBlocks:t,onUpdate:s})})]})]})}var Z=n("ESls"),$=n("Joxa");var ee=n("vvax"),te=n("MNxV");var ne=Object(s.connect)(()=>({}),e=>({completeResourceFetch:t=>e(Object(p.b)("PinResource",{field_set_key:"detailed",id:t.id},t)),invalidatePin:t=>e(Object(p.f)("PinResource",{field_set_key:"detailed",id:t}))}))((function({apiErrorMessage:e,board:t,completeResourceFetch:n,commentsDisabled:s,description:r,disableDelete:a,invalidatePin:c,isLoadingPin:l,isProcessing:h,onChangeBoard:p,onChangeComment:b,onChangeSection:j,onClickBoardCreate:g,onClickDeleteButton:x,onClickEditPages:y,onClickSectionCreate:O,onHide:_,pinResource:S,sectionId:w,sectionName:C,title:I,triggerBoardAndSectionCreate:k}){var E,P;const T=null!==(E=S.data)&&void 0!==E?E:{},B=T.story_pin_data,R=null!==(P=T.images&&T.images["474x"])&&void 0!==P?P:{},[L,N]=Object(o.useState)(!1),[A,U]=Object(o.useState)(null),[Y,F]=Object(o.useState)(!1),[H,z]=Object(o.useState)({}),[V,q]=Object(o.useState)([]);Object(o.useEffect)(()=>{const e=(null==B?void 0:B.metadata.basics)||null;if(e){const t=Object($.b)(e);z(t.keyValueBlocks||{}),q(t.listBlocks||[])}},[B]),Object(o.useEffect)(()=>{e&&U(e)},[e]);const Q=(e,t)=>{z({...H,[e]:t}),N(!0)},K=e=>{q(e),N(!0)},X=T.created_at?new Date(T.created_at):null,ne=X&&Object(W.a)(X,14),ie=!!ne&&new Date<ne,oe=V.length>0||Object.keys(H).length>0,se=Object(ee.b)(m.a._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Story Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14});return Object(i.jsx)(f.b,{accessibilityModalLabel:m.a._("Edit your previously saved pin","editModal.editStoryPinModal.accessibilityLabel","Accessible label for edit previously saved story pin modal"),footer:Object(i.jsxs)(v.e,{display:"flex",justifyContent:"between",children:[Object(i.jsx)(v.e,{"data-test-id":"delete-pin-button",children:Object(i.jsx)(v.f,{color:"white",disabled:a,onClick:x,size:"lg",text:m.a._("Delete","editModal.editStoryPinModal.deleteButton","Delete button for previously saved story pin")})}),!!A&&Object(i.jsx)(v.e,{display:"flex",justifyContent:"center",children:Object(i.jsx)(D.a,{errorMessage:A,htmlFor:"pin-edit-generic-error"})}),Object(i.jsxs)(v.e,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[Object(i.jsx)(v.e,{paddingX:1,children:Object(i.jsx)(v.f,{onClick:_,size:"lg",text:m.a._("Cancel","editModal.editStoryPinModal.cancelButton","Cancel button to not save edits to previously saved story pin")})}),Object(i.jsx)(v.e,{"data-test-id":"edit-pin-save",paddingX:1,children:Object(i.jsx)(v.f,{color:"red",onClick:()=>{if(L&&B){F(!0);const e=Object($.c)({keyValueBlocks:H,listBlocks:V}),t=function(e){return{metadata:{basics:e.metadata.basics?Object($.a)(e.metadata.basics):void 0,diy_data:e.metadata.diy_data,pin_image_signature:e.metadata.pin_image_signature,pin_title:e.metadata.pin_title,recipe_data:e.metadata.recipe_data,template_type:e.metadata.template_type},pages:(t=e.pages,t.map(e=>{var t;const n=e.blocks.map(e=>{switch(e.type){case"story_pin_paragraph_block":return{block_style:e.block_style,style:e.style,text:e.text,type:0};case"story_pin_heading_block":return{block_style:e.block_style,level:e.level,style:e.style,text:e.text,type:1};case"story_pin_image_block":return{block_style:e.block_style,image_signature:e.image_signature,tracking_id:e.tracking_id,type:2};case"story_pin_video_block":return{block_style:e.block_style,tracking_id:e.tracking_id,type:3,video_signature:e.video_signature};default:return null}}).filter(Boolean);return n.length>0?{blocks:n,layout:e.layout,style:null!==(t=e.style)&&void 0!==t&&t.background_color?{background_color:e.style.background_color}:void 0}:null}).filter(Boolean))};var t}(B),i={...t,metadata:{...t.metadata,basics:e}},o={pin_id:T.id,story_pin:JSON.stringify(i)};u.a.create("StoryPinEditResource",o).callUpdate().then(e=>{const{resource_response:t}=e;c(T.id),n(t.data),k()}).catch(e=>{U(e.message),F(!1)})}else k()},size:"lg",text:m.a._("Done","editModal.editStoryPinModal.doneButton","Done button to save edits to previously saved story pin")})})]})]}),heading:m.a._("Edit Pin","editModal.editStoryPinModal.heading","Edit a previously saved story pin"),onDismiss:_,size:"md",children:l||!S.isLoaded||Y||h?Object(i.jsx)(v.e,{paddingX:12,paddingY:9,children:Object(i.jsx)(v.R,{accessibilityLabel:m.a._("Loading edit information","editPinModal.editStoryPinModal.spinner","Accessible label for the edit pin loading icon"),show:!0})}):Object(i.jsx)(v.e,{overflow:"hidden",children:Object(i.jsx)(v.e,{marginEnd:-4,marginStart:-4,children:Object(i.jsx)(Z.a,{name:"web_story_pin_limit_edits",children:({anyEnabled:e})=>{var n;return Object(i.jsxs)(v.e,{display:"flex",minHeight:300,overflow:"hidden",paddingX:8,children:[Object(i.jsxs)(v.e,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",paddingX:4,children:[Object(i.jsxs)(v.C,{wash:!0,rounding:4,width:120,children:[Object(i.jsx)(v.x,{alt:r,color:"#efefef",naturalHeight:R.height,naturalWidth:R.width,src:R.url}),Object(i.jsx)(v.e,{position:"absolute",left:!0,top:!0,padding:2,children:Object(i.jsxs)(v.e,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"center",opacity:.8,padding:2,rounding:"pill",children:[Object(i.jsx)(v.v,{accessibilityLabel:m.a._("Story Pin icon","editModal.editStoryPinModal.storyPinIndicator","Story Pin icon indicator"),color:"darkGray",icon:"story-pin",size:12}),Object(i.jsx)(v.e,{marginStart:1,children:Object(i.jsx)(v.Y,{size:"md",weight:"bold",children:null===(n=T.story_pin_data)||void 0===n?void 0:n.page_count})})]})})]}),ie||!e?Object(i.jsx)(v.e,{"data-test-id":"edit-pages-button",paddingY:2,children:Object(i.jsx)(v.f,{inline:!0,onClick:y,text:m.a._("Edit Pages","editModal.editStoryPinModal.editPagesButton","Edit pages label for story pin creation entry point")})}):null]}),Object(i.jsx)(v.e,{direction:"column",display:"flex",flex:"grow",paddingX:4,children:Object(i.jsx)(v.e,{marginBottom:-2,marginTop:-2,children:Object(i.jsx)(v.e,{maxHeight:500,overflow:"auto",paddingX:1,children:Object(i.jsxs)(v.e,{maxWidth:504,children:[e&&ne&&Object(i.jsx)(v.e,{paddingY:2,children:ie?Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(v.Y,{size:"md",children:Object(ee.b)(m.a._("Edit until {{ editDate }}","editModal.editStoryPinModal.lastEditableDate","Let user know the last date this Pin can be edited on"),{editDate:Object(i.jsx)(te.b,{dateFormatType:te.a.NUMERIC,useUTC:!1,value:ne},"noEditsTwoWeeksAfter-"+T.created_at)})}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(v.Y,{color:"gray",size:"md",children:se})})]}):Object(i.jsx)(v.Y,{color:"gray",size:"md",children:se})}),Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:m.a._("Title","editModal.editStoryPinModal.titleLabel","Label for form input where users will input the title of their pin")}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsxs)(v.e,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"between",padding:4,rounding:4,children:[Object(i.jsx)(v.Y,{color:"gray",truncate:!0,children:I||""}),Object(i.jsx)(v.v,{accessibilityLabel:m.a._("Lock","editModal.editStoryPinModal.lockIcon.accessibilityLabel","Label for the lock icon to show that editing a story pin title is locked"),color:"darkGray",icon:"lock"})]})})]}),Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:m.a._("Board","editModal.editStoryPinModal.boardLabel","Label for dropdown where users will choose their board")}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(M.a,{board:t,id:"BoardPicker",isStoryPin:!0,onBoardChosen:p,onBoardCreate:g})})]}),Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:m.a._("Section","editModal.editStoryPinModal.sectionLabel","Label for dropdown where users will choose their section")}),Object(i.jsx)(v.e,{paddingY:2,children:(null==t?void 0:t.id)&&Object(i.jsx)(G.b,{isStoryPin:!0,board:t,onSectionChange:j,onSectionCreate:O,selectedSectionId:w,selectedSectionName:C})})]}),e&&oe&&ie&&Object(i.jsx)(J,{keyValueBlocks:H,listBlocks:V,onUpdateKeyValueBlock:Q,onUpdateListBlocks:K,templateType:null==B?void 0:B.metadata.template_type}),T.can_delete_did_it_and_comments&&Object(i.jsxs)(v.e,{paddingY:2,children:[Object(i.jsx)(v.Y,{size:"md",children:m.a._("Comments and Photos Permissions","editModal.editStoryPinModal.commentsAndPhotosPermissionsLabel","Label for dropdown where users can toggle off permissions for comments and photos")}),Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(d.a,{isNoTitle:!0,commentsDisabled:s,onCommentChange:b})})]})]})})})})]})}})})})})}));function ie({canEdit:e,onTitleChange:t,title:n,errorMessage:s}){return Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(v.o,{}),Object(i.jsxs)(v.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(i.jsx)(v.e,{column:12,mdColumn:3,paddingY:2,children:Object(i.jsx)(v.y,{htmlFor:"TitleField",children:Object(i.jsx)(v.Y,{size:"md",children:m.a._("Title","Label for editing title of pin","Label for editing title of pin")})})}),Object(i.jsx)(v.e,{column:12,mdColumn:8,children:e?Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(v.e,{children:Object(i.jsx)(v.ab,{hasError:(s||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})}),!!s&&Object(i.jsx)(v.e,{justifyContent:"center",children:Object(i.jsx)(D.a,{errorMessage:s,htmlFor:"pin-edit-title"})})]}):Object(i.jsx)(v.e,{column:12,mdColumn:8,paddingY:2,children:Object(i.jsx)(v.Y,{size:"md",weight:"bold",children:n})})})]})]})}function oe({onChangeWebsite:e,link:t,errorMessage:n}){return Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(v.o,{}),Object(i.jsxs)(v.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3,children:[Object(i.jsx)(v.e,{column:12,mdColumn:3,paddingY:2,children:Object(i.jsx)(v.y,{htmlFor:"WebsiteField",children:Object(i.jsx)(v.Y,{size:"md",children:m.a._("Website")})})}),Object(i.jsxs)(v.e,{column:12,mdColumn:8,children:[Object(i.jsx)(v.e,{children:Object(i.jsx)(v.ab,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})}),!!n&&Object(i.jsx)(v.e,{justifyContent:"center",children:Object(i.jsx)(D.a,{errorMessage:n,htmlFor:"pin-edit-website"})})]})]})]})}var se=n("TN0d"),re=n("3DIk"),ae=n("Wrea"),ce=n("sH+O"),de=n("OSge"),le=n("r8eU"),ue=n("NjDU"),he=n("w70y"),pe=n("eIuQ"),be=n("pLLR"),je=n("ANjH"),ge=n("guDk"),me=n("c50B"),fe=n("VqlB"),xe=n("EC67");function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e){return Boolean(e&&e.trim().length)}function _e(e,t){const n=Oe(e),i=Oe(t);return(n||i)&&e!==t}class ve extends o.Component{constructor(...e){super(...e),ye(this,"state",{altText:this.props.pinResource.data&&this.props.pinResource.data.alt_text||"",board:this.props.pinResource.data&&this.props.pinResource.data.board||null,commentsDisabled:this.props.pinResource.data&&(this.props.pinResource.data.comments_disabled||this.props.pinResource.data.did_it_disabled)||!1,description:this.props.pinResource.data&&this.props.pinResource.data.description.trim()||"",apiErrorMessage:null,link:this.props.pinResource.data&&this.props.pinResource.data.link||"",sectionId:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.id||null,sectionName:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.title||null,showDeleteConfirmation:!1,carousel_data:this.props.pinResource.data&&this.props.pinResource.data.carousel_data||null,title:this.props.pinResource.data&&this.props.pinResource.data.title||"",userNote:this.props.pinResource.data&&this.props.pinResource.data.unified_user_note&&this.props.pinResource.data.unified_user_note.trim()||"",isLoadingPin:!this.props.pinResource.isLoaded,isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:this.props.pinResource.data&&this.props.pinResource.data.user_mention_tags||[]}),ye(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),ye(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),ye(this,"updateCarouselSlotIndex",()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})}),ye(this,"handleBoardChange",e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),ye(this,"createBoard",e=>{const{createBoard:t}=this.props,{board:n}=this.state;!n.id&&n.name&&e&&t(n.name,e).then(e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}),ye(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:l.a.BoardPrivacy.PUBLIC,access:"write"};this.setState({board:t,sectionId:null,sectionName:null})}),ye(this,"createSection",()=>{const{board:e,sectionName:t}=this.state;if(!t)return;if(!e.id)return void this.createBoard();const n={boardId:e.id,name:t},{createSection:i}=this.props;i(n).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(e=>{const t=Object(ge.c)(e);this.setState({shouldShowGenericUpdateError:!t,apiErrorMessage:t?e.message:null}),e&&Object(ge.c)(e)&&this.showErrorToast(Object(ge.b)(e)||e.message)})}),ye(this,"handleSectionCreateClick",e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})}),ye(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),ye(this,"handleDeletePin",()=>{const{pinResource:{data:e},pinId:t,onDelete:n,onHide:i,changeBoardPinCount:o,changeUserPinCount:s,advertiser_id:r}=this.props,a={...r?{advertiser_id:r}:{},id:t};return u.a.create("PinResource",a).callDelete().then(()=>{if(this._isMounted){if(!e)return;const{board:{id:r},pinner:{id:a},section:c}=e;o({boardId:r,sectionId:c&&c.id||void 0,increment:-1}),s({userId:a,increment:-1}),se.a.instance.publish(r,"pinDeleted",t),se.a.instance.publish(a,"pinDeleted"),se.a.instance.publish(t,"pinDeleted"),i(),n&&n()}})}),ye(this,"sanitizeCarouselData",e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)}),t}}return null}),ye(this,"triggerBoardAndSectionCreate",e=>()=>{const{board:t,sectionId:n,sectionName:i}=this.state;t&&!t.id&&t.name?this.createBoard(e):!n&&i?this.createSection():this.handleSave()}),ye(this,"logPinEditEvent",(e,t,n,i,o)=>{const s={},{pinId:r,view:a,viewParameter:c}=this.props,{userMentionTags:d}=this.state;if(s.objectId=r,s.num_user_mention_tags=d.length,e&&(s.board_was_modified=!0),!e&&t&&(s.board_section_was_modified=!0),n){const{description:e}=this.state,{description:t}=o;s.original_pin_description=t,s.edited_pin_description=e}if(i){const{carousel_data:e}=this.state,{carousel_data:t}=o;s.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(t)),s.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(e))}Object(R.b)(2,{component:208,view:a,viewParameter:c,...s})}),ye(this,"handleSave",()=>{this.setState({apiErrorMessage:null,isProcessing:!0});const{advertiser_id:e,pinId:t,pinResource:{data:n},invalidatePinResource:i,completeResourceFetch:o,onHide:s}=this.props;if(!n)return;const{alt_text:r,board:a,comments_disabled:c,did_it_disabled:d,title:l,description:h,link:p,section:b,carousel_data:j}=n,{carousel_data:m,shouldShowValidationLinkFormatError:f}=this.state;let x;if(m){const e=this.sanitizeCarouselData();e&&(x=JSON.stringify(e))}const{altText:y,board:O,commentsDisabled:_,currentIndex:v,title:S,description:w,sectionId:C,carousel_data:I,userMentionTags:k}=this.state,M=O||a,E=f?p:this.state.link,P={alt_text:y,board_id:M.id,board_section_id:C,carousel_data_json:x,description:w,disable_comments:_,disable_did_it:_,id:t,link:E,title:S,user_mention_tags:JSON.stringify(k),...e?{advertiser_id:e}:{}},T=b&&b.id||null,B=M.id,D=a.id,R=_e(r,y),L=D!==B,N=(Boolean(T)||Boolean(C))&&T!==C,A=_e(l,S),U=_e(h,w),Y=_e(p,E),F=Boolean(I)&&Boolean(j)&&!g()(I,j);R||L||N||A||U||Y||F||(c!==_||d!==_)?u.a.create("PinResource",P).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const{changeBoardPinCount:t,onSubmit:r,pinId:a,pinMoved:c}=this.props;(L||N)&&B&&D&&(c({selectedPinIds:[a],source:{boardId:D,sectionId:T},target:{boardId:B,sectionId:C}}),t({boardId:B,sectionId:C||void 0,increment:1}),t({boardId:D,sectionId:T||void 0,increment:-1})),r&&B&&M.url&&r({boardId:B,title:M.name,sectionId:C,url:M.url}),s(),i(a);const{data:d}=e;d.carousel_data&&(d.carousel_data.index=v),o(d),this.logPinEditEvent(L,N,U,F,n)}}).catch(e=>{const t=Object(ge.c)(e),{shouldShowValidationTitleError:n,shouldShowValidationDescriptionError:i,shouldShowValidationLinkFormatError:o}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!(t||n||i||o)}),t&&this.showErrorToast(Object(ge.b)(e)||e.message)}):(s(),i(t)),this.setState({isProcessing:!1})}),ye(this,"handleTextChanges",(e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const i=c()(n),{carousel_slots:o=[]}=i,{currentIndex:s,shouldApplyTextToAll:r,description:a,link:d,title:l}=this.state,u=this.valueIsValidForType(e,t);switch(r?o.forEach(n=>n[t]=e):o[s]&&(o[s][t]=e),t){case"details":const t=0===s?e:a;this.setState({description:t,carousel_data:i||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===s?e:d;this.setState({link:n,carousel_data:i||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const o=0===s?e:l;this.setState({title:o,carousel_data:i||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}}),ye(this,"handleDescriptionChange",({value:e,userMentionTags:t})=>{const n=this.valueIsValidForType(e,"description"),i=this.valueIsValidForType(t,"userMentionTags");t.length<this.state.userMentionTags.length&&Object(R.b)(8906,{element:116,tag_type:1}),this.setState({description:e,userMentionTags:t,userNote:e,shouldShowValidationDescriptionError:!n,shouldShowValidationUserMentionTagsError:!i,shouldShowGenericUpdateError:!1})}),ye(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),ye(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),ye(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),ye(this,"handleAltTextChange",({value:e})=>{this.setState({altText:e})}),ye(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(me.r)([Object(me.q)({message:m.a._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}}),ye(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),ye(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),ye(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),ye(this,"handleShouldApplyToAll",e=>{if(e){const{currentIndex:t,carousel_data:n}=this.state;if(!n)return;const i=c()(n),{carousel_slots:o}=i,{details:s,link:r,title:a}=o[t];o.forEach(e=>{e.details=s,e.title=a,e.link=r}),this.setState({carousel_data:i,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),ye(this,"handleCarouselSlider",e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})}),ye(this,"handleClickStoryPinPages",()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/story-pin-builder/${e.id}/edit`)}),ye(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),ye(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}componentDidUpdate(e){const{pinResource:{data:t,isLoaded:n},carouselSlotCurrentIndex:i}=this.props;t&&n!==e.pinResource.isLoaded&&this.setState({altText:t.alt_text,board:t.board,commentsDisabled:t.comments_disabled||t.did_it_disabled,description:t.description&&t.description.trim(),isLoadingPin:!1,link:t.link,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,userNote:t.unified_user_note,carousel_data:t.carousel_data,currentIndex:void 0!==i?i:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[]})}componentWillUnmount(){this._isMounted=!1}showErrorToast(e){this.props.toastManagerContext.showOneToast(({onHide:t})=>Object(i.jsx)(O.a,{color:"red",duration:5e3,onHide:t,text:e})),this.props.onHide()}getCurrentUserId(e){const{adminModeInfo:t,advertiserOwnerUserId:n}=this.props;return t&&t.version===re.a?n:e.isAuth?e.id:""}render(){const{disableDelete:e,onHide:t,pinResource:n,pinId:o,requestContext:s,adminModeInfo:a,viewer:c}=this.props,{altText:l,apiErrorMessage:u,board:h,commentsDisabled:p,description:b,link:j,sectionId:g,sectionName:x,showDeleteConfirmation:y,title:O,userNote:_,isLoadingPin:S,isProcessing:w,carousel_data:C,shouldApplyTextToAll:M,currentIndex:P,shouldDisableSave:T,shouldShowCarouselSliders:B,shouldShowValidationTitleError:D,shouldShowValidationDescriptionError:R,shouldShowValidationLinkFormatError:L,shouldShowGenericUpdateError:N,shouldShowValidationUserMentionTagsError:U,userMentionTags:Y}=this.state;if(y)return Object(i.jsx)(I,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const F=new le.b(s,"web_pin_notes").enabledWithNoActivation(),G=n.data||{},W=!!(C&&C.carousel_slots&&C.carousel_slots.length>1),q=C&&C.carousel_slots&&C.carousel_slots.length>0&&C.carousel_slots[P]||{},{details:Q="",link:K="",title:X=""}=q,J=(null==a?void 0:a.version)===re.a&&!(null!=a&&a.writeMode),Z=!!(G&&G.story_pin_data_id&&G.story_pin_data),$=G&&(G.access||[]).includes("write")||this.props.canEdit||!!h&&Object(r.a)({action:4,board:h}),ee=e=>{const t=this.getCurrentUserId(e),n=this.props.canEdit&&this.props.advertiserOwnerUserId?this.props.advertiserOwnerUserId:t;return $&&!G.is_repin&&!J&&!Z&&(W||!C)&&(G.native_creator&&G.native_creator.id===n||W&&G.pinner&&G.pinner.id===n||G.link_domain&&G.link_domain.official_user&&G.link_domain.official_user.id===n||!!G.domain&&G.pinner&&G.pinner.id===n&&G.pinner.domain_url&&G.pinner.domain_url.includes(G.domain))},te=e=>!ee(e),se=G&&G.images&&G.images["474x"]||{},ae=new le.b(s,"web_story_pin_creator").enabledWithNoActivation(),ue=new le.b(s,"web_alt_text").enabledWithNoActivation(),he=G.story_pin_data&&G.story_pin_data.metadata&&G.story_pin_data.metadata.version?Object(ce.b)(G.story_pin_data.metadata.version,de.c):null,be=null!=he&&he>=0,je=!!G.story_pin_data&&!!G.story_pin_data.metadata&&!!G.story_pin_data.metadata.is_editable&&G.native_creator&&G.native_creator.id===this.getCurrentUserId(c);if(Z&&ae&&be&&je)return Object(i.jsx)(ne,{apiErrorMessage:u,board:h,commentsDisabled:p,description:b,disableDelete:e,isLoadingPin:S,isProcessing:w,onChangeBoard:this.handleBoardChange,onChangeComment:this.handleCommentChange,onChangeSection:this.handleSectionChange,onClickBoardCreate:this.handleBoardCreateClick,onClickDeleteButton:this.onClickDeleteButton,onClickEditPages:this.handleClickStoryPinPages,onClickSectionCreate:this.handleSectionCreateClick,onHide:t,pinResource:n,sectionId:g,sectionName:x,title:O,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(c)});const ge=te(c)?null:Object(i.jsx)(ie,{canEdit:$,onTitleChange:W?this.handleCarouselTitleChange:this.handleTitleChange,title:W?X:O,errorMessage:D?Object(pe.b)(W):""}),me=($||c.isAuth&&(G.pinner||{}).id===c.id)&&!(F&&te(c))?Object(i.jsx)(A,{canAddUserMentionTags:!te(c),canEdit:$,description:(e=>W?Q:te(e)?_:b)(c)||"",errorMessage:(e=>R?(e=>te(e)?Object(pe.e)(W):Object(pe.a)(W))(e):U?Object(pe.d)(W):"")(c),initialMentions:Y,label:te(c)?m.a._("Note","Label for editing user note","Label for editing user note"):m.a._("Description","Label for editing description","Label for editing description"),placeholder:te(c)?m.a._("Write a note about this Pin...","Placeholder for editing user note","Placeholder for editing user note"):m.a._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:W?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,fe=(e=>ee(e)&&!(G.aggregated_pin_data&&G.aggregated_pin_data.is_shop_the_look))(c)?Object(i.jsx)(oe,{link:W?K:j,onChangeWebsite:W?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:L?Object(pe.c)(W):""}):null,xe=W?Object(i.jsxs)(v.e,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end",children:[Object(i.jsx)(v.e,{paddingY:2,children:Object(i.jsx)(v.y,{htmlFor:"applyTextToAll",children:Object(i.jsx)(v.Y,{children:m.a._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")})})}),Object(i.jsx)(v.e,{paddingX:2,paddingY:2,children:Object(i.jsx)(v.T,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:M})})]}):null,ye=ee(c)&&ue?Object(i.jsx)(k,{canEdit:$,onAltTextChange:this.handleAltTextChange,altText:l}):null,Oe=G.can_delete_did_it_and_comments?Object(i.jsx)(d.a,{commentsDisabled:p,onCommentChange:this.handleCommentChange}):null;return Object(i.jsx)(f.b,{heading:m.a._("Edit this Pin","EditPinModal.ModalHeading.EditThisPin","Edit a previously saved pin"),accessibilityModalLabel:m.a._("Edit your previously saved pin","EditPinModal.ModalHeading.AccessibleLabel","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:t,footer:Object(i.jsx)(z,{apiErrorMessage:u,shouldShowGenericUpdateError:N,onClickDeleteButton:this.onClickDeleteButton,disableDelete:e,onHide:t,shouldDisableSave:T,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(c)}),children:S||!n.isLoaded||w?Object(i.jsx)(v.e,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(i.jsx)(v.R,{accessibilityLabel:m.a._("loading","EditPinModal.LoadingPin.Spinner","Accessible label for the edit pin loading icon"),show:!0})}):Object(i.jsxs)(v.e,{display:"flex",justifyContent:"between",minHeight:350,paddingX:4,children:[Object(i.jsxs)(v.e,{column:12,mdColumn:9,children:[Object(i.jsx)(E,{board:h||G.board,canEdit:$,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),Object(i.jsx)(V,{board:h||G.board,canEdit:$,onSectionCreate:this.handleSectionCreateClick,onSectionChange:this.handleSectionChange,sectionId:g,sectionName:x,currentSection:G.section}),ge,me,fe,xe,ye,Oe]}),Object(i.jsx)(H,{isCarousel:W,shouldShowCarouselSliders:B,onCarouselSlide:this.handleCarouselSlider,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,currentIndex:this.state.currentIndex,carouselData:this.state.carousel_data,pinId:o,description:b,image:se})]})})}}const Se=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object(je.compose)(_.c,Object(s.connect)((function(e){const{advertiser:t,viewer:n}=e;return n.isAuth&&t?{advertiser_id:t.id,...t.owner_user_id!==n.id?{advertiserOwnerUserId:t.owner_user_id,adminModeInfo:t.admin_mode_info}:{},viewer:n}:{viewer:n}}),e=>({changeBoardPinCount:t=>e(Object(ae.d)(t)),changeUserPinCount:t=>e(Object(ue.b)(t)),completeResourceFetch:t=>e(Object(p.b)("PinResource",Se(t.id,!1),t)),createBoard:(t,n)=>e(function(e,t){const n={name:e,privacy:l.a.BoardPrivacy.PUBLIC};return e=>u.a.create("BoardResource",n).callCreate().then(n=>{const i=n.resource_response.data;return e(t.username&&Object(p.f)("BoardsResource",Object(h.a)(t.username,!1))),i})}(t,n)),createSection:t=>e(Object(b.a)(t)),invalidatePinResource:t=>e(Object(p.f)("PinResource",Se(t,!0))),pinMoved:Object(je.bindActionCreators)(fe.b,e)})))((function(e){const t=Object(he.a)({name:"PinResource",options:Se(e.pinId,!0)});return Object(i.jsx)(ve,{...e,history:Object(xe.g)(),pinResource:t,requestContext:Object(be.d)()})}))},"6HHy":function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("nKUr"),o=n("Ye/N"),s=n("vvax"),r=n("n6mq");function a({onUpdate:e,showLabel:t=!0,value:n}){const a=[];for(let i=1;i<=50;i+=1)a.push({value:String(i),label:Object(s.b)(o.a.ngettext("{{ servings }} serving","{{ servings }} servings",i,"storyboard.detailsList.field.servings","Option for number of servings a story pin recipe will provide"),{servings:i}).join("")});return Object(i.jsx)(r.e,{width:"100%",display:"flex",children:Object(i.jsx)(r.e,{width:"100%",position:"relative",children:Object(i.jsx)(r.P,{size:"lg",id:"servings",name:"servings",label:t?o.a._("Servings","storyboard.detailsList.field.servings","Header title for serving count entry for story pin recipe"):void 0,placeholder:o.a._("Pick a serving size","storyboard.detailsList.recipe","Placeholder caption for servings count input in story pin recipe"),value:n,options:a,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},"8Enz":function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("nKUr"),o=n("Ye/N"),s=n("n6mq");function r({onUpdate:e,showLabel:t=!0,value:n}){const r=[{label:o.a._("Easy","storyboard.detailsList.field.difficulty","Easy difficulty rating for story pin"),value:String(1)},{label:o.a._("Intermediate","storyboard.detailsList.field.difficulty","Medium difficulty rating for story pin"),value:String(2)},{label:o.a._("Expert","storyboard.detailsList.field.difficulty","Hard difficulty rating for story pin"),value:String(3)},{label:o.a._("Not applicable","storyboard.detailsList.field.difficulty","Difficulty rating does not apply for story pin"),value:String(0)}];return Object(i.jsx)(s.e,{width:"100%",display:"flex",children:Object(i.jsx)(s.e,{width:"100%",children:Object(i.jsx)(s.P,{size:"lg",id:"servings",name:"servings",label:t?o.a._("Difficulty","storyboard.detailsList.field.difficulty","Header title for difficulty rating entry for story pin"):void 0,placeholder:o.a._("Pick a difficulty rating","storyboard.detailsList.field","Placeholder caption for difficulty rating input in story pin"),value:n,options:r,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})})})}},"8cMa":function(e,t,n){var i=n("nKUr"),o=n("Ye/N"),s=n("n6mq");t.a=function({type:e}){const t={group:{accessibilityLabel:o.a._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:o.a._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:o.a._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return Object(i.jsx)(s.e,{marginStart:1,children:Object(i.jsx)(s.e,{marginStart:2,children:"sections"===e||"sectionsInline"===e?Object(i.jsx)(s.v,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):Object(i.jsx)(s.v,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})})})}},"9QW3":function(e,t,n){n.d(t,"a",(function(){return r}));const i={row:0,section:0},o={row:-1,section:-1},s=()=>{};class r{constructor(e){this.index=Object.assign({},i),this.sections=e,this.updateCallback=s,this.selectItem=s}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===o.row&&t===o.section?this.index=Object.assign({},i):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===o.row&&t===o.section)this.index=Object.assign({},i);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},o),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},BkRI:function(e,t,n){var i=n("OBhP");e.exports=function(e){return i(e,5)}},"Dw+G":function(e,t,n){var i=n("juv8"),o=n("mTTR");e.exports=function(e,t){return e&&i(t,o(t),e)}},EEGq:function(e,t,n){var i=n("juv8"),o=n("oCl/");e.exports=function(e,t){return i(e,o(e),t)}},G6z8:function(e,t,n){var i=n("fR/l"),o=n("oCl/"),s=n("mTTR");e.exports=function(e){return i(e,s,o)}},GBVV:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n("nKUr"),o=n("n6mq");const s={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function r(){return Object(i.jsx)(o.e,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:Object(i.jsx)(o.e,{dangerouslySetInlineStyle:s,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function a({disabled:e,name:t,onClick:n,size:s,submitting:a,text:c}){return Object(i.jsxs)(o.e,{display:"flex",position:"relative",children:[a&&Object(i.jsx)(r,{}),Object(i.jsx)(o.f,{color:"red",disabled:e||a,inline:!0,name:t,onClick:n,size:s,type:"submit",text:c})]})}},Gi0A:function(e,t,n){var i=n("QqLw"),o=n("ExA7");e.exports=function(e){return o(e)&&"[object Map]"==i(e)}},IBrh:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("nKUr"),o=n("q1tI"),s=n("mEMi"),r=(n("9QW3"),n("n6mq"));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends o.Component{constructor(e){super(e),a(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),a(this,"handleIndexUpdate",e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),a(this,"handleSelectItem",e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)}),a(this,"handleMouseEnter",e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)}),a(this,"handleMouseLeave",()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),a(this,"renderItems",(e,t)=>{const{renderItem:n}=this.props,{selectedIndex:o}=this.state,{row:s,section:a}=o||{},{customProps:c={},items:d,renderItem:l}=e,{isDisabled:u=(e=>!1)}=c,h=t===a,p=l||n;return p&&d.map((e,n)=>{const o=u(e),a={section:t,row:n},d=h&&n===s;return Object(i.jsx)(r.e,{"data-test-id":"board-selection",ref:!o&&d?this.setSelectedItemRef:null,children:o?p({item:e,hovered:d,sectionProps:c}):Object(i.jsx)(r.X,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(a),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:p({item:e,hovered:d,sectionProps:c})})},n)})}),a(this,"renderSections",()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map((t,n)=>Object(i.jsxs)(r.e,{children:[e&&e(t,n),this.renderItems(t,n)]},n))});const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),i=n.top,o=n.bottom,s=t.getBoundingClientRect(),r=s.top;o>=s.bottom?e.scrollIntoView(!1):i<=r&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return Object(i.jsx)(s.a,{fetchMore:n,children:({setRef:n,onScroll:o})=>Object(i.jsx)(r.e,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:o,overflow:"auto",ref:e=>{this.containerRef=e,n(e)},children:this.renderSections()})})}}},JKZO:function(e,t,n){n.d(t,"a",(function(){return x}));var i=n("nKUr"),o=n("q1tI"),s=n("nokP"),r=n.n(s),a=n("yeYm"),c=n.n(a),d=n("clxp"),l=n("FDmi"),u=n("Ye/N"),h=n("n6mq");var p=e=>{const{id:t,isFocused:n,onMouseDown:o,onMouseEnter:s,onMouseUp:r,mention:a,role:c,searchValue:d}=e;return Object(i.jsx)("div",{id:t,onMouseDown:o,onMouseEnter:s,onMouseUp:r,searchvalue:d,role:c,children:Object(i.jsxs)(h.e,{display:"flex",alignItems:"center",color:n?"lightGray":"transparent",rounding:4,dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},children:[Object(i.jsx)(h.e,{padding:1,children:Object(i.jsx)(l.a,{accessibilityLabel:"",name:a.full_name,size:"sm",src:a.image_medium_url,verified:a.verified_identity&&a.verified_identity.verified})}),Object(i.jsxs)(h.e,{marginStart:2,marginEnd:2,overflow:"hidden",children:[Object(i.jsx)(h.Y,{truncate:!0,weight:"bold",color:"darkGray",children:a.full_name}),Object(i.jsx)(h.e,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},children:Object(i.jsxs)(h.Y,{size:"sm",color:"darkGray",children:[a.username,a.explicitly_followed_by_me&&" • "+u.a._("Following","mentions.mentionsFlyout.following","Label to tell the user that they are viewing a user they follow")]})})]})]})})},b=n("eOdZ"),j=n("Sbkd"),g=n("hM3f"),m=n("v83y");const f=e=>Object(i.jsx)(h.Y,{inline:!0,color:"blue",weight:"bold",children:e.children});function x({focusOnMount:e,initialMentions:t=[],initialText:n="",instanceId:s,maxSuggestions:a=g.a,onAddMention:l,onBlur:u,onChange:x,onFocus:y,onSearchMentionCancel:O,onSuggestionsPopoverClose:_,onSuggestionsPopoverOpen:v,placeholder:S,readOnly:w,spellCheck:C}){const I=Object(o.useRef)(null),[k,M]=Object(o.useState)(!1),[E,P]=Object(o.useState)(!1),[T,B]=Object(o.useState)([]),[{plugins:D,MentionSuggestions:R}]=Object(o.useState)(()=>(()=>{const e=r()({entityMutability:"IMMUTABLE",mentionComponent:f,mentionPrefix:"@",mentionTrigger:"@",positionSuggestions:g.f,supportWhitespace:!1}),{MentionSuggestions:t}=e;return{plugins:[e],MentionSuggestions:t}})()),L=Object(j.a)(),[N,A]=Object(o.useState)();Object(o.useEffect)(()=>{A(m.EditorState.createWithContent(Object(g.c)({text:n,mentions:t})))},[s]),Object(o.useEffect)(()=>{M(!0)},[]),Object(o.useEffect)(()=>{e&&I.current&&setTimeout(I.current.focus,50)},[k]);const U=Object(o.useCallback)(e=>{B([]),l&&l(e)},[]),Y=Object(o.useCallback)(e=>{u&&u(e)},[]),F=Object(o.useCallback)(e=>{const t=e.getCurrentContent(),n=t.getPlainText(""),i=Object(g.e)(t);A(e),x({text:n,mentions:i})},[]),H=Object(o.useCallback)(e=>{y&&y(e)},[]),z=Object(o.useCallback)(()=>{P(!1),_&&_()},[]),G=Object(o.useCallback)(()=>{P(!0),v&&v()},[]),V=Object(o.useCallback)((e,t)=>{if(O&&" "===e&&E&&O(),T.length>0)return"not-handled";const n=t.getCurrentContent(),i=t.getSelection();return F(m.EditorState.push(t,m.Modifier.replaceText(n,i,e),"adjust-depth")),"handled"},[T]),W=Object(o.useCallback)(({value:e})=>{L(b.a.create("UserMentionTypeaheadResource",{query:e,num_people:a}).callGet(),"userMentionTypeahead").then(e=>{const t=Object(g.d)({suggestions:e.resource_response.data});B(t)}).catch(()=>{})},[]);return Object(i.jsx)(d.a,{name:"EditorWithMentions",children:k&&Object(i.jsxs)(h.e,{"data-test-id":"editor-with-mentions",width:"100%",children:[Object(i.jsx)(c.a,{editorState:N,onBlur:Y,onChange:F,onFocus:H,handleBeforeInput:V,placeholder:S,plugins:D,readOnly:w,ref:I,spellCheck:C,stripPastedStyles:!0}),Object(i.jsx)(R,{onAddMention:U,onClose:z,onOpen:G,onSearchChange:W,suggestions:T,entryComponent:p})]})})}},Joxa:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return r}));const i=[0,2,1];function o(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map(e=>{const{heading:t,blocks:n}=e;return{heading:t,blocks:n.map(e=>({text:e.text,type:9})),type:7}}):[];return{key_value_blocks:n&&n.length>0?n.map(e=>({category_type:e.category_type,type:8,value:e.value})):[],list_blocks:i}}function s(e){const{list_blocks:t,key_value_blocks:n}=e,i=t&&t.length>0?t.map(e=>{const{heading:t,blocks:n}=e;return{heading:t,items:n.map(e=>e.text)}}):[];return{keyValueBlocks:n&&n.length>0?n.reduce((e,t)=>{const{category_type:n,value:i}=t;return e[n]=i,e},{}):{},listBlocks:i}}function r(e){const{keyValueBlocks:t,listBlocks:n}=e;if(!t&&!n)return null;return{list_blocks:n?n.map(e=>{const{heading:t,items:n}=e;let i=[];return n&&(i=n.map(e=>({text:e,type:9}))),{blocks:i,heading:t,type:7}}):[],key_value_blocks:(t?Object.keys(t).map(e=>{const n=t[e],o=Number.parseInt(e,10),s=i.indexOf(o)>-1&&n===Number.parseInt(n,10).toString();return n&&s?{value:n,category_type:o,type:8}:null}):[]).filter(Boolean)}}},NXrh:function(e,t,n){n.d(t,"a",(function(){return x}));var i=n("nKUr"),o=n("q1tI"),s=n("/MKj"),r=n("Sihc"),a=n("Ye/N"),c=n("rrvb"),d=n("ANjH"),l=n("0BOE"),u=n("jdx6"),h=n("qyR9"),p=n("n6mq"),b=n("w70y");function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g="NO_SECTION_VALUE";function m({section:e,hovered:t,searchQuery:n}){return Object(i.jsxs)(p.e,{children:[Object(i.jsx)(p.e,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:Object(i.jsx)(p.e,{flex:"grow",children:Object(i.jsx)(p.Y,{weight:"bold",children:Object(u.b)(n,e.title)})})}),e.id===g&&Object(i.jsx)(p.o,{})]})}class f extends o.Component{constructor(...e){super(...e),j(this,"state",{searchQuery:""}),j(this,"getPickerSections",()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let i=t&&t.data||[];return i=n?i.filter(e=>e.id!==n):[{id:g,title:a.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...i],e.length>=h.a&&(i=Object(l.a)(i,e,"title")),[{items:i}]}),j(this,"createBtnDisabled",()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some(e=>e.title.toLowerCase()===t.toLocaleLowerCase())}),j(this,"handleSectionCreate",()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:i,onSectionCreate:o}=this.props,{searchQuery:s}=this.state;o?o(s):i&&e.id&&i(Object(r.a)({boardId:e.id,name:s})).then(e=>{n&&n.refreshData(),this.setState({searchQuery:""}),t(e)})}),j(this,"handleSectionSelected",e=>{const{onSectionChange:t}=this.props;e.id===g?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),j(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),j(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return Object(i.jsx)(m,{hovered:t,searchQuery:n,section:e})})}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refreshData()}}render(){const{isStoryPin:e,sectionsResource:t,selectedSectionId:n,mergingFromSectionId:o,selectedSectionName:s}=this.props,{searchQuery:r}=this.state;let d=o?a.a._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):a.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(n){let e;t&&t.data&&(e=t.data.find(e=>e.id===n)),d=e&&e.title||d}else s&&(d=s);return Object(i.jsxs)(p.e,{children:[Object(i.jsx)(p.R,{accessibilityLabel:a.a._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&Object(i.jsx)(c.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:d,isStoryPin:e,onCreate:o?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getPickerSections()})]})}}const x=f;t.b=Object(d.compose)(Object(s.connect)(),Object(b.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id}),allowStale:!1}))(x)},NdQN:function(e,t,n){var i=n("nKUr"),o=n("q1tI"),s=n("JW66"),r=n("Ye/N"),a=(n("9QW3"),n("n6mq"));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends o.Component{constructor(...e){super(...e),c(this,"setInputRef",e=>{e&&(this._input=e)}),c(this,"handleKeyDown",e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case s.a.KeyCode.ENTER:case s.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),n.select();break;case s.a.KeyCode.UP:e.preventDefault(),n.prev();break;case s.a.KeyCode.DOWN:e.preventDefault(),n.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return Object(i.jsx)("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"},children:Object(i.jsx)(a.N,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:r.a._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t})})}}t.a=d},OBhP:function(e,t,n){var i=n("fmRc"),o=n("gFfm"),s=n("MrPd"),r=n("WwFo"),a=n("Dw+G"),c=n("5Tg0"),d=n("Q1l4"),l=n("VOtZ"),u=n("EEGq"),h=n("qZTm"),p=n("G6z8"),b=n("QqLw"),j=n("yHx3"),g=n("wrZu"),m=n("+iFO"),f=n("Z0cm"),x=n("DSRE"),y=n("zEVN"),O=n("GoyQ"),_=n("1+5i"),v=n("7GkX"),S=n("mTTR"),w="[object Arguments]",C="[object Function]",I="[object Object]",k={};k[w]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[I]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[C]=k["[object WeakMap]"]=!1,e.exports=function e(t,n,M,E,P,T){var B,D=1&n,R=2&n,L=4&n;if(M&&(B=P?M(t,E,P,T):M(t)),void 0!==B)return B;if(!O(t))return t;var N=f(t);if(N){if(B=j(t),!D)return d(t,B)}else{var A=b(t),U=A==C||"[object GeneratorFunction]"==A;if(x(t))return c(t,D);if(A==I||A==w||U&&!P){if(B=R||U?{}:m(t),!D)return R?u(t,a(B,t)):l(t,r(B,t))}else{if(!k[A])return P?t:{};B=g(t,A,D)}}T||(T=new i);var Y=T.get(t);if(Y)return Y;T.set(t,B),_(t)?t.forEach((function(i){B.add(e(i,n,M,i,t,T))})):y(t)&&t.forEach((function(i,o){B.set(o,e(i,n,M,o,t,T))}));var F=N?void 0:(L?R?p:h:R?S:v)(t);return o(F||t,(function(i,o){F&&(i=t[o=i]),s(B,o,e(i,n,M,o,t,T))})),B}},OSge:function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return d}));const i="0.8.0",o=9/16,s=6;function r(e,t=1){return{x:e/5,y:e*(t-1)}}const a={HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",MENTION_STICKER:"story_pin_mention_sticker_block",PRODUCT_STICKER:"story_pin_product_sticker_block"},c={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1},d={...c,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},Q7uW:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("nKUr"),o=n("n6mq");function s(e){const{htmlFor:t,errorMessage:n}=e;return Object(i.jsx)(o.y,{htmlFor:t,children:Object(i.jsx)(o.e,{marginTop:1,children:Object(i.jsx)(o.Y,{color:"red",size:"md",children:n})})})}},Sbkd:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),o=n("mvLR");function s(){const e=Object(i.useRef)([]),t=Object(i.useRef)({});return Object(i.useEffect)(()=>()=>{[...Object.keys(t.current).map(e=>t.current[e]),...e.current].forEach(e=>e())},[]),function(n,i){if(i){const e=t.current[i];e&&(e(),delete t.current[i])}const{cancel:s,promise:r}=Object(o.a)(n);return i?t.current[i]=s:e.current.push(s),r}}},Sihc:function(e,t,n){n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var i=n("Pqnw"),o=n("uVIr"),s=n("VqlB"),r=n("eOdZ"),a=n("oN2T"),c=n("KFEb"),d=n("Wer7");function l(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:h=[]}){let p=0;"RECOMMENDATION"===n?p=1:"EDITED_RECOMMENDATION"===n&&(p=2);const b={board_id:e,initial_pins:u&&!u.all?u.pinIds:h,name:t,name_source:p};return t=>r.a.create("BoardSectionResource",b).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(l(e,n)),t(Object(o.a)({feedId:e,feedType:c.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(a.c)(e,"pin_count")),t(Object(d.f)("BoardSectionsRepinResource",{board_id:e}));const{all:r,pinIds:h}=u||{all:!1,pinIds:[]};return r?new Promise((i,o)=>t(Object(s.a)({inverseSelection:!0,selectedPinIds:h,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>i(n)).catch(o)):(h.length>0&&t(Object(i.a)(c.a.BOARD_PINS,e)),n)})}},V711:function(e,t,n){var i=n("nKUr"),o=n("q1tI"),s=n("/MKj"),r=n("8cMa"),a=n("JW66"),c=n("Ye/N"),d=n("rrvb"),l=n("0BOE"),u=n("jdx6"),h=n("Wer7"),p=n("qyR9"),b=n("w70y"),j=n("n6mq"),g=n("ANjH"),m=n("oN2T");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x({board:e,hovered:t,searchQuery:n}){const o=e.privacy===a.a.BoardPrivacy.SECRET;return Object(i.jsxs)(j.e,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2,children:[Object(i.jsx)(j.e,{flex:"grow",children:Object(i.jsx)(j.Y,{weight:"bold",children:Object(u.b)(n,e.name)})}),Object(i.jsxs)(j.e,{direction:"row",display:"flex",flex:"none",children:[o&&Object(i.jsx)(r.a,{type:"secret"}),e.is_collaborative&&Object(i.jsx)(r.a,{type:"group"})]})]})}class y extends o.Component{constructor(e){super(e),f(this,"getSections",()=>{const{searchQuery:e}=this.state,{boardResource:{data:{all_boards:t}}}=this.props;return e.length>=p.a?[{items:Object(l.a)(t,e)}]:[{items:t}]}),f(this,"createBtnDisabled",()=>{const{boardResource:{data:{all_boards:e}}}=this.props,{searchQuery:t}=this.state;return e.some(e=>e.name.toLowerCase()===t.toLowerCase())}),f(this,"handleBoardCreate",e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:i}=this.props;n(),i?i(e):t({name:e,privacy:"public"}).then(e=>{const{onBoardChosen:t}=this.props;t(e)})}),f(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),f(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),f(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return Object(i.jsx)(x,{board:e,hovered:t,searchQuery:n})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t,isStoryPin:n,viewer:o}=this.props,{searchQuery:s,selectedBoard:r}=this.state;let a=c.a._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?a=t.name:r&&(a=r.name),Object(i.jsxs)(j.e,{children:[Object(i.jsx)(j.R,{accessibilityLabel:c.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&Object(i.jsx)(d.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:a,isStoryPin:n,onCreate:this.handleBoardCreate(o),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:s,sections:this.getSections()})]})}}t.a=Object(g.compose)(Object(s.connect)((function(e){const{advertiser:t,viewer:n}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id;return{advertiser_id:i?t.id:null,username:i?t.owner_user_id:null,viewer:n}}),(function(e){return{invalidateBoardPickerBoardsResource:()=>{e(Object(h.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},createBoard:t=>e(Object(m.g)(t))}})),Object(b.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username,...e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{}}),allowStale:!1}))(y)},VOtZ:function(e,t,n){var i=n("juv8"),o=n("MvSz");e.exports=function(e,t){return i(e,o(e),t)}},VqlB:function(e,t,n){n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return g}));var i=n("3z7j"),o=n("Pqnw"),s=n("uVIr"),r=n("MhBu"),a=n("eOdZ"),c=n("oN2T"),d=n("KFEb"),l=n("1inl"),u=n("Ye/N");function h(e){l.a.showError(function(e){switch(e.api_error_code){case 2171:case 2172:case 2173:return u.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}const p=e=>Object(o.a)(e.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,e.sectionId||e.boardId);function b(e,t){const{source:n,target:o}=e;o.boardId!==n.boardId?(t(Object(c.c)(n.boardId,"pin_count")),t(Object(c.c)(o.boardId,"pin_count"))):n.sectionId&&o.sectionId||t(Object(c.c)(o.boardId,"pin_count")),n.sectionId&&t(Object(i.a)(n.sectionId)),o.sectionId&&t(Object(i.a)(o.sectionId))}function j(e){return t=>{const{selectedPinIds:n,source:i,target:o}=e;t(Object(r.a)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(s.a)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:n,itemType:"pin"})),b(e,t)}}function g(e){return t=>function(e,t){const{inverseSelection:n,selectedPinIds:i,source:o,target:c}=e;if(o.boardId===c.boardId&&(o.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){const e={board_id:o.boardId,new_board_id:c.boardId,old_section_id:o.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:i};return a.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(p(o)),t(p(c))])).catch(h)}{const e=(e,n)=>{t(Object(r.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:i,itemType:"pin"})),t(Object(s.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:i,itemType:"pin"}))};e(o,c);const n=()=>e(c,o);if(c.boardId===o.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:i};return a.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),h(e)})}{const e={section_id:o.sectionId,pins:i};return a.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),h(e)})}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:i};return a.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),h(e)})}}}(e,t).then(()=>b(e,t))}},WwFo:function(e,t,n){var i=n("juv8"),o=n("7GkX");e.exports=function(e,t){return e&&i(t,o(t),e)}},XYm9:function(e,t,n){var i=n("+K+b");e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},b2z7:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},dtqy:function(e,t,n){var i=n("nKUr"),o=n("q1tI"),s=n("/MKj"),r=n("5S2N"),a=n("Sp3T"),c=n("ANjH"),d=n("U4JR");t.a=Object(c.compose)(Object(s.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:i}=e&&t&&e[t]||{},{index:o}=i||{};return void 0!==n?{carouselSlotCurrentIndex:o||n||0}:{}}),(function(e){return function(t){const[n,s]=Object(o.useState)(!1),c=Object(a.a)(),{pinId:l,onDelete:u,onSubmit:h,carouselSlotCurrentIndex:p}=t;return Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(e,{...t,handlePinEditButtonClick:e=>c(()=>{e&&e.stopPropagation();const{component:n,onToggleModal:i}=t;i&&i(!0),Object(d.b)(101,{element:3,...n?{component:n}:{}}),s(!0)})}),n&&Object(i.jsx)(r.a,{carouselSlotCurrentIndex:p,onDelete:u,onHide:()=>{s(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:h,pinId:l})]})}}))},eIuQ:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return c}));var i=n("Ye/N");function o(e){return e?i.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):i.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function s(e){return e?i.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):i.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function r(e){return i.a._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function a(e){return e?i.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):i.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin")}function c(e){return e?i.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):i.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}},gONw:function(e,t,n){var i=n("nKUr"),o=n("q1tI"),s=n("n6mq");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends o.Component{constructor(...e){super(...e),r(this,"state",{isHovering:!1}),r(this,"onHover",()=>{this.setState({isHovering:!0})}),r(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:n,inFlyoutExp:o}=this.props;return o?Object(i.jsxs)(s.e,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover,children:[Object(i.jsx)(s.e,{children:Object(i.jsx)(s.C,{height:40,width:40,rounding:2,children:this.state.isHovering&&n?Object(i.jsx)(s.x,{alt:"",color:"",fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url}):Object(i.jsx)(s.e,{color:"lightGray",height:40,width:40})})}),Object(i.jsx)(s.e,{padding:2,children:Object(i.jsx)(s.u,{size:"sm",children:e})})]}):Object(i.jsxs)(s.e,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[Object(i.jsx)(s.e,{children:Object(i.jsx)(s.v,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})}),Object(i.jsx)(s.e,{marginStart:3,children:Object(i.jsx)(s.Y,{color:t?"darkGray":"gray",weight:"bold",children:e})})]})}}var c=n("Ye/N"),d=n("w70y"),l=n("U4JR"),u=n("seP0");t.a=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:n,image:r,minHeight:h,onBoardSelected:p})=>{const[b,j]=Object(o.useState)(-1),g=Object(u.c)(),{data:m=[],error:f,isLoaded:x}=Object(d.a)({name:"BoardTitleSuggestionsResource",options:{pin_id:n}}),y=(O=m,Object(o.useMemo)(()=>O&&O.length?O.map(e=>e.title):[],[O]));var O;Object(o.useEffect)(()=>{x&&t&&g&&(f?g.error():g.stop())},[x]);const _=()=>{j(-1)},v=(t,n)=>{const o=b===n;return Object(i.jsx)("li",{children:Object(i.jsx)(s.X,{onMouseEnter:()=>(e=>{j(e)})(n),onMouseLeave:_,onTap:()=>(e=>{p(y[e],!1),Object(l.b)(101,{component:13025,element:23})})(n),children:Object(i.jsx)(a,{selected:o,name:t,inFlyoutExp:e,image:r})})},n)};return x?y&&y.length?e?Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:y.map(v)})}):t?Object(i.jsxs)(s.e,{children:[Object(i.jsx)(s.e,{marginTop:5,marginStart:6,marginBottom:3,children:Object(i.jsx)(s.Y,{children:c.a._("Suggested board names","text above suggested board names list","text above suggested board names list")})}),Object(i.jsx)("ul",{children:y.map(v)})]}):Object(i.jsxs)(s.e,{children:[Object(i.jsx)(s.e,{marginTop:2,paddingX:5,children:Object(i.jsx)(s.Y,{children:c.a._("Suggested board names")})}),Object(i.jsx)("ul",{children:y.map(v)})]}):null:Object(i.jsx)(s.e,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:h||"",children:Object(i.jsx)(s.R,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0})})}},guDk:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n("Ye/N");const o=()=>i.a._("We can’t complete this action because you’re in ‘read-only’ mode. Switch to ‘edit mode’ to make changes.","adminMode.writeOnlyAction.errorMessage","A toast message indicating that the user is trying to perform a write action in read-only mode."),s=[25],r=e=>!!e&&("string"==typeof e?e===o():!!e.code&&s.includes(e.code)),a=e=>e&&s.includes(e.code)?o():null},hM3f:function(e,t,n){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return p}));var i=n("aAE7"),o=n.n(i),s=n("n6mq"),r=n("v83y"),a=n("TgLd");const c=5,d=5,l=({text:e,mentions:t})=>{const n=[],i={},o=[];t&&t.forEach((e,t)=>{const{length:n,offset:s,object_id:r}=e;i[t]={data:{mention:{id:r}},mutability:"IMMUTABLE",type:"mention"},o.push({key:t,length:n,offset:s})}),n.push({text:e,key:null,depth:null,inlineStyleRanges:null,type:"unstyled",entityRanges:o});return Object(r.convertFromRaw)({entityMap:i,blocks:n})},u=e=>{const t=[];let n=0;return e.getBlocksAsArray().forEach((i,o)=>{let s=null;i.findEntityRanges(t=>{const n=t.getEntity();if(!n)return!1;const i=e.getEntity(n);return"mention"===i.getType()&&(s=i.data.mention,!0)},(e,i)=>{s&&t.push({object_id:s.id,offset:n+e,length:i-e,tag_type:1})}),n+=1+i.getLength()}),t},h=({suggestions:e})=>e.map(e=>({...e,name:e.username})),p=({decoratorRect:e,popover:t,state:n,props:i,...r})=>{const c=(e.x||e.left)+t.offsetWidth,d=(e.y||e.top)+t.offsetHeight,{top:l,left:u}=o()({decoratorRect:e,popover:t,state:n,props:i});let h=null;c>window.innerWidth&&(h=parseFloat(u)-c%window.innerWidth+"px");let p="",b=parseFloat(l)+5+"px";return d>window.innerHeight&&(p="translateY(-100%)",b=parseFloat(l)-20+"px"),{display:"block",top:b,left:h||u,zIndex:new s.m([a.a]).index(),transform:p}}},jdx6:function(e,t,n){n.d(t,"b",(function(){return c}));var i=n("nKUr"),o=n("8cMa"),s=n("JW66"),r=n("Ye/N"),a=n("n6mq");function c(e,t){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,o,s)=>{if(n.length>0&&e&&e.length){const r=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(Object(i.jsx)("em",{style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"},children:t.substring(r,r+e.length)},s),o)}return[o]},[]):t}t.a=function(e){const{disabled:t,item:n,isSection:d,isSelectMode:l,isWithinSectionPicker:u,saveState:h,searchQuery:p,selected:b}=e,j=d?null:n,g=d?n:null,m=g&&g.title||j&&j.name||"";let f="",x=!1,y="",O=0;j&&({image_cover_url:f,is_collaborative:x,privacy:y,section_count:O=0}=j);const _=c(p,m),v=y===s.a.BoardPrivacy.SECRET,S=!t&&(b||!!h),w=!u&&O>0,C=O>0?"boardWithSection":"boardWithoutSection",I=l?r.a._("Select","Board select button label","Board select button label"):r.a._("Save","Pin save button label","Pin save button label");return Object(i.jsxs)(a.e,{alignItems:"center",color:S?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":C,children:[j?Object(i.jsx)(a.e,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none",children:f?Object(i.jsx)(a.x,{src:f,alt:m,fit:"cover",naturalWidth:1,naturalHeight:1}):Object(i.jsx)("span",{})}):Object(i.jsx)(a.e,{height:36,paddingX:2}),Object(i.jsxs)(a.e,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow",children:[Object(i.jsx)(a.Y,{color:t?"gray":"darkGray",size:"md",truncate:!0,weight:"bold",children:_}),(w||!S)&&Object(i.jsxs)(a.e,{alignItems:"center",display:"flex",children:[v&&Object(i.jsx)(o.a,{type:"secret"}),x&&Object(i.jsx)(o.a,{type:"group"}),w&&Object(i.jsx)(o.a,{type:"sections"})]}),!w&&S&&!h&&Object(i.jsxs)(a.e,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:[!l&&Object(i.jsx)(a.e,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}},children:Object(i.jsx)(a.v,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})}),Object(i.jsx)(a.Y,{color:"white",overflow:"normal",size:"md",weight:"bold",children:I})]}),!w&&S&&"loading"===h&&Object(i.jsx)(a.e,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:Object(i.jsx)(a.R,{accessibilityLabel:r.a._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0})})]})]})}},"kT2/":function(e,t,n){var i=n("nKUr"),o=n("q1tI"),s=n("JW66"),r=n("Ye/N"),a=n("n6mq");const c=e=>{const t=e.split("\n");t.push("");const n=[];let i,o=[];return t.forEach(e=>{const t=e.indexOf("•");t>-1?(i||(i=""),o.push(e.substring(t+1).trim())):((i||o.length>0)&&n.push({heading:i,items:o}),i=e,o=[])}),n},d=e=>{let t="";return e.forEach((n,i)=>{const{heading:o,items:s}=n;o&&(t+=o),s&&s.length>0&&(t+="\n• "+s.join("\n• ")),i<e.length-1&&(t+="\n\n")}),t};t.a=function({header:e,helperText:t,listBlocks:n,onUpdate:l,placeholderListBlocks:u}){const h=d(u||[{heading:r.a._("What you'll need","storyboard.detailsList.placeholder","Placeholder text header for details list of story Pin"),items:[r.a._("Write a bullet list of tools, materials and anything else!","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin"),r.a._("Type it up or copy and paste.","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin")]}]),[p,b]=Object(o.useState)(n?d(n):"");return Object(i.jsx)(a.e,{children:Object(i.jsx)(a.Z,{id:"storyboard-details-list",helperText:t,label:e,onChange:({value:e})=>{b(e),l(c(e))},onBlur:()=>{""===p.trim()&&b("")},onKeyDown:({event:e,value:t})=>{const{keyCode:n,target:i,shiftKey:o}=e;if(i instanceof HTMLTextAreaElement){const{selectionStart:r,selectionEnd:a}=i;if(r===a){let a=0,d=0,u="";if(n===s.a.KeyCode.ENTER?"\n• "!==t.substring(r-3,r)||"\n"!==t.substring(r,r+1)&&r!==t.length?o||"\n"===t.substring(r-1,r)||(a=0,u="\n• "):(a=-3,u="\n"):n!==s.a.KeyCode.BACKSPACE&&n!==s.a.KeyCode.DELETE||("\n• "===t.substring(r-3,r)?a=-3:"\n•"===t.substring(r-2,r)?a=-2:"\n"===t.substring(r-1,r)&&"•"===t.substring(r,r+1)&&(a=-1,d=1)),0!==a||0!==d||""!==u){const n=t.substring(0,r+a)+u+t.substring(r+d);b(n);const o=r+a+u.length;setTimeout(()=>{i.selectionStart=o,i.selectionEnd=o},10),l(c(n)),e.preventDefault()}}}},placeholder:h,rows:7,value:p})})}},mEMi:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("q1tI"),o=n("DzJC"),s=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends i.PureComponent{constructor(...e){super(...e),r(this,"setContainerRef",e=>{this.containerRef=e}),r(this,"fetchMoreIfNecessary",s()(()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:n},i)=>e+t+(i?i(t):2*t)>n)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},mvLR:function(e,t,n){function i(e){let t=!1;return{promise:new Promise((n,i)=>{e.then(e=>t?i({isCanceled:!0}):n(e),e=>i(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}n.d(t,"a",(function(){return i}))},"oCl/":function(e,t,n){var i=n("CH3K"),o=n("LcsW"),s=n("MvSz"),r=n("0ycA"),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,s(e)),e=o(e);return t}:r;e.exports=a},"otv/":function(e,t,n){var i=n("nmnc"),o=i?i.prototype:void 0,s=o?o.valueOf:void 0;e.exports=function(e){return s?Object(s.call(e)):{}}},qyR9:function(e,t,n){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return f}));var i=n("nKUr"),o=n("q1tI"),s=n("jdx6"),r=n("gONw"),a=n("Ye/N"),c=n("gdcG"),d=n("n6mq");var l=Object(c.a)((function(e){const{buttonLabel:t,isHovering:n,isRowItem:o,hasHoverState:s,hoverHandlers:r,name:c,onClick:l}=e,u=c||t||a.a._("Create board");return Object(i.jsx)(d.X,{onMouseEnter:r.onMouseOver,onMouseLeave:r.onMouseLeave,onTap:l,children:Object(i.jsxs)(d.e,{alignItems:"center",color:s&&n?"lightGray":"white",display:"flex",flex:o?"shrink":"none",height:64,width:"100%",children:[Object(i.jsx)(d.e,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton",children:Object(i.jsx)(d.v,{accessibilityLabel:a.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})}),c?Object(i.jsx)(d.e,{margin:1,children:Object(i.jsxs)(d.Y,{inline:!0,overflow:"normal",children:[" ",a.a._("Create: ")," "]})}):null,Object(i.jsxs)(d.Y,{align:"center",inline:!0,truncate:!0,weight:"bold",children:[" ",u," "]})]})})})),u=n("9QW3"),h=n("NdQN"),p=n("IBrh"),b=n("seP0");function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=2;class m extends o.Component{constructor(...e){super(...e),j(this,"state",{searchQuery:""}),j(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})}),j(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),j(this,"renderSectionHeader",(e,t)=>e.title?Object(i.jsxs)(d.e,{children:[t>0&&Object(i.jsx)(d.o,{}),Object(i.jsx)(d.e,{paddingX:3,paddingY:1,children:Object(i.jsx)(d.Y,{size:"md",children:e.title})})]}):null),j(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:o,isSelectMode:r,disabledRowId:a}=this.props,{searchQuery:c}=this.state,{inSectionSelection:d=!1}=n,l=o&&o.board===e.id?o&&o.state:null,u="board_section"===e.type;return Object(i.jsx)(s.a,{isSelectMode:r,disabled:e.id===a&&d,item:e,isSection:u,isWithinSectionPicker:d,saveState:l,searchQuery:c,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:o,isLoaded:s,onCreate:c,pinId:b}=this.props;if(s){const{searchQuery:s}=this.state,a=o(s);return this.indexManager=new u.a(a.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),Object(i.jsxs)(d.e,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}},children:[!n&&Object(i.jsxs)(d.e,{children:[Object(i.jsx)(d.e,{paddingX:3,marginBottom:4,marginTop:1,children:Object(i.jsx)(h.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:s})}),Object(i.jsx)(d.o,{})]}),Object(i.jsx)(p.a,{disabled:!!e,grow:!n&&!s,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:a}),Object(i.jsx)(d.o,{}),c&&Object(i.jsx)(l,{buttonLabel:t,hasHoverState:!0,name:s,onClick:()=>c(s)}),n&&c&&b&&Object(i.jsx)(r.a,{onBoardSelected:c,pinId:b})]})}return Object(i.jsx)(d.e,{paddingY:5,children:Object(i.jsx)(d.R,{accessibilityLabel:a.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0})})}}function f(e){const t=Object(b.c)();return Object(i.jsx)(m,{...e,boardPickerStopwatch:t})}},r8eU:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n("QLaP"),o=n.n(i);class s{constructor(e,t){o()(e,"You must pass a requestContext to check an Experiment"),o()(t,"You must pass the name of the experiment to check"),this.requestContext=e,this.experimentName=t.toLowerCase()}_isSeoExperiment(){return this.experimentName.startsWith("seo_")}_getGroup(e){return this.requestContext.isBot?this._isSeoExperiment()&&this.requestContext.seoExperiments.v2GetSEOGroup(this.experimentName)||"":this._isSeoExperiment()?e?"":this.requestContext.seoExperiments.v2GetSEOGroup(this.experimentName)||"":e?this.requestContext.experiments.v2ActivateExperiment(this.experimentName)||"":this.requestContext.experiments.v2GetGroup(this.experimentName)||""}}class r extends s{getGroup(e=!1){return this._getGroup(e)}}class a extends s{_isTreatment(e){return e.startsWith("enabled")||e.startsWith("employee")}enabled(){return this._isTreatment(this._getGroup(!0))}enabledWithNoActivation(){return this._isTreatment(this._getGroup(!1))}}},rrvb:function(e,t,n){var i=n("nKUr"),o=n("q1tI"),s=n("Ye/N"),r=n("9QW3"),a=n("NdQN"),c=n("IBrh"),d=n("gdcG"),l=n("n6mq");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends o.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"setContainerRef",e=>{this.containerRef=e}),u(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),u(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()}),u(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),u(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),u(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:o},isHovering:d,isStoryPin:u,onCreate:h,onSearchQueryUpdate:p,renderRow:b,searchQuery:j,sections:g,createBtnDisabled:m}=this.props,{showFlyout:f}=this.state;this.indexManager=new r.a(g.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const x=!j.trim()||!!m;return Object(i.jsxs)("div",{ref:this.setContainerRef,style:{...u?{flex:"grow"}:{}},children:[Object(i.jsx)(l.X,{fullWidth:!!u,onMouseEnter:n,onMouseLeave:o,onTap:this.handleDropdownTouch,rounding:2,children:Object(i.jsxs)(l.e,{alignItems:"center",color:d?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:u?4:3,rounding:u?4:2,children:[Object(i.jsx)(l.e,{display:"flex",flex:"grow",children:Object(i.jsx)(l.Y,{weight:"bold",children:e})}),Object(i.jsx)(l.v,{accessibilityLabel:"",color:"darkGray",icon:"arrow-down",size:14})]})}),f&&Object(i.jsx)(l.e,{position:"relative",children:Object(i.jsxs)(l.e,{borderStyle:"sm",color:"white",dangerouslySetInlineStyle:{__style:{zIndex:1}},direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:u?4:2,width:"100%",children:[Object(i.jsx)(l.e,{children:Object(i.jsxs)(l.e,{display:"flex",marginStart:-1,marginEnd:-1,padding:2,children:[Object(i.jsx)(l.e,{display:"flex",flex:"grow",paddingX:1,children:Object(i.jsx)(a.a,{hideIcon:!0,indexManager:this.indexManager,onChange:p,value:j})}),h&&Object(i.jsx)(l.e,{paddingX:1,children:Object(i.jsx)(l.f,{disabled:x,inline:!0,onClick:this.handleCreate,text:s.a._("Create","board or section dropdown create button","board or section dropdown create button")})})]})}),Object(i.jsx)(c.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:b,sections:g})]})})]})}}t.a=Object(d.a)(h)},"sH+O":function(e,t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));const o=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e.match(n)||!t.match(n))return null;const i=e.split("."),o=t.split("."),s=Math.max(i.length,o.length);for(let r=0;r<s;r+=1){const e=r<i.length?parseInt(i[r],10):0,t=r<o.length?parseInt(o[r],10):0;if(e<t)return-1;if(e>t)return 1}return 0};class s{constructor(e,t,n){i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"!=typeof window&&(this.intervalId=window.setInterval(()=>{const e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume())}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;const e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}},seP0:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d}));var i=n("FZ8N"),o=n("F4HH");const{Provider:s,useHook:r}=Object(o.a)({name:"board_picker",v2LoggerMetricName:16,sampleRate:i.b?1:.1}),a=(e,t)=>{let n="unknown";null!=t&&t.includes("pin/")?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},c=s,d=r},uVIr:function(e,t,n){function i(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,"a",(function(){return i}))},"w/wX":function(e,t,n){var i=n("QqLw"),o=n("ExA7");e.exports=function(e){return o(e)&&"[object Set]"==i(e)}},wrZu:function(e,t,n){var i=n("+K+b"),o=n("XYm9"),s=n("b2z7"),r=n("otv/"),a=n("yP5f");e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return s(e);case"[object Set]":return new c;case"[object Symbol]":return r(e)}}},xOLo:function(e,t,n){n.r(t),n.d(t,"CarouselSliders",(function(){return b}));var i=n("nKUr"),o=n("/MKj"),s=n("XSD5"),r=n("ZbwW"),a=n("Ye/N"),c=n("0nTG"),d=n("U4JR"),l=n("n6mq");const u={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},h=(e,t,n,i,o,s,r,a,l,u)=>{if(!u||!o){const{carousel_slots:u,id:h}=o;Object(d.b)(108,{...l,objectId:t,component:a,view:r,viewParameter:s,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(h),carouselSlotIndex:n,toCarouselSlotIndex:i}},...Object(c.f)(e)||{}})}},p=(e,t,n,i,o,s)=>{s||void 0===i||(e.preventDefault(),e.stopPropagation(),i(t,n)),void 0!==o&&o(n)},b=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:o,pin:s,pinId:r,contextLogData:c,viewParameter:d,viewType:b,componentType:j,isEditMode:g})=>{if(!t)return null;const{carousel_slots:m,index:f}=t,x=void 0!==e?e:f,y=Math.max(0,x-1),O=Math.min(m.length-1,x+1);return Object(i.jsxs)(l.e,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0,children:[Object(i.jsx)("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{p(e,r,y,n,o,g),h(s,r,x,y,t,d,b,j,c,g)},onKeyUp:e=>{p(e,r,y,n,o,g),h(s,r,x,y,t,d,b,j,c,g)},style:u.slider,children:x>0&&Object(i.jsx)(l.e,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:Object(i.jsx)(l.v,{color:"white",icon:"arrow-back",accessibilityLabel:a.a._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")})})}),Object(i.jsx)("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{p(e,r,O,n,o,g),h(s,r,x,O,t,d,b,j,c,g)},onKeyUp:e=>{p(e,r,O,n,o,g),h(s,r,x,O,t,d,b,j,c,g)},style:u.slider,children:x<m.length-1&&Object(i.jsx)(l.e,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:Object(i.jsx)(l.v,{color:"white",icon:"arrow-forward",accessibilityLabel:a.a._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")})})})]})};t.default=Object(o.connect)(({pins:e},{carouselData:t,pinId:n})=>{const i=e[n];return{pin:i,carouselData:t||Object(r.a)(i)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(s.a)(t,n))}))(b)},yHx3:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},zEVN:function(e,t,n){var i=n("Gi0A"),o=n("sEf8"),s=n("mdPL"),r=s&&s.isMap,a=r?o(r):i;e.exports=a}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/101-083a93a9ba57a088fd60.mjs.map